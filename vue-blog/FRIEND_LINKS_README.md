# 友链管理功能

## 功能概述

友链管理功能允许管理员在后台管理友情链接，包括添加、编辑、删除和状态管理。

## 数据库结构

友链表（link）包含以下字段：

| 字段名 | 数据类型 | 说明 | 备注 |
|--------|----------|------|------|
| id | bigint | 主键 | 自增 |
| name | varchar(48) | 网站名称 | 必填 |
| description | varchar(255) | 网站描述 | 可选 |
| url | varchar(255) | 网站地址 | 必填，URL格式 |
| avatar | varchar(600) | 友链头像 | 可选，图片URL |
| sort | int | 排序 | 用于排序显示 |
| status | tinyint(1) | 链接状态 | 0正常 1审核中 |
| create_time | datetime | 创建时间 | 自动生成 |

## 功能特性

### 管理端功能

1. **友链列表管理**
   - 分页显示友链列表
   - 支持按名称、描述搜索
   - 支持按状态筛选
   - 显示头像、名称、描述、状态、创建时间

2. **友链操作**
   - 添加新友链
   - 编辑现有友链
   - 删除友链
   - 批量删除
   - 状态切换（正常/审核中）
   - 批量状态更新

3. **头像上传**
   - 支持图片上传
   - 头像预览
   - 图片格式验证

### 前台展示

1. **友链展示组件**
   - 网格布局显示友链
   - 只显示状态为正常的友链
   - 支持头像、名称、描述显示
   - 点击跳转到对应网站

2. **管理员快捷入口**
   - 管理员可看到"管理友链"按钮
   - 直接跳转到管理页面

## API接口

### 管理端API

- `GET /admin/links` - 获取友链列表
- `GET /admin/links/:id` - 获取友链详情
- `POST /admin/links` - 创建友链
- `PUT /admin/links/:id` - 更新友链
- `DELETE /admin/links/:id` - 删除友链
- `DELETE /admin/links/batch` - 批量删除友链
- `PATCH /admin/links/:id/status` - 更新友链状态
- `PATCH /admin/links/batch/status` - 批量更新友链状态

### 前台API

- `GET /api/links` - 获取友链列表（只返回状态为正常的）

## 使用说明

### 添加友链

1. 进入管理后台
2. 点击左侧菜单"友链管理"
3. 点击"添加友链"按钮
4. 填写网站信息：
   - 网站名称（必填）
   - 网站描述（可选）
   - 网站地址（必填）
   - 上传头像（可选）
   - 设置排序（可选）
   - 选择状态（正常/审核中）
5. 点击"创建"按钮

### 管理友链

1. 在友链列表中可以：
   - 搜索友链
   - 筛选状态
   - 编辑友链信息
   - 切换状态
   - 删除友链
   - 批量操作

### 前台展示

1. 友链组件会自动加载状态为正常的友链
2. 以网格形式展示
3. 点击友链会跳转到对应网站
4. 管理员可以看到"管理友链"按钮

## 文件结构

```
src/
├── api/
│   ├── admin.js          # 管理端API（包含友链管理接口）
│   └── frontend.js       # 前台API（包含友链获取接口）
├── components/
│   └── common/
│       └── FriendLinks.vue  # 友链展示组件
├── views/
│   └── admin/
│       └── LinkManagement.vue  # 友链管理页面
└── router/
    └── index.js          # 路由配置（包含友链管理路由）
```

## 注意事项

1. 友链头像建议使用正方形图片，会自动裁剪为圆形
2. 网站地址必须是有效的URL格式
3. 排序数字越小，显示越靠前
4. 只有状态为"正常"的友链才会在前台显示
5. 删除友链操作不可恢复，请谨慎操作
