import{u as j,g as W}from"./user-CHPnUmjS.js";import{i as Q,j as m,k as z,b as g,l as t,n as f,e,p as X,s as Z,h as F,c as k,f as o,q as r,t as ee,v as oe,x as te,y as le,z as T,g as q,r as v,A as se,B as ae,C as ne,D as I,F as re,E as ie,G,H as L,I as de,o as Y,J as ue,a as ce}from"./index-BjRrW_j8.js";import{a as N}from"./avatar-Br5af8Id.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as pe}from"./article-BD8_1azX.js";const me={__name:"ThemeToggle",setup(E){const d=Q();return(c,u)=>{const n=m("el-icon"),_=m("el-button");return g(),z(_,{link:"",onClick:u[0]||(u[0]=b=>f(d).toggleTheme())},{default:t(()=>[f(d).isDark?(g(),z(n,{key:0},{default:t(()=>[e(f(X))]),_:1})):(g(),z(n,{key:1},{default:t(()=>[e(f(Z))]),_:1}))]),_:1})}}},ge="/assets/githubLogo-DzGq4Dyy.png",fe="/assets/csdnLogo-BfhxAksU.png",ve={class:"fixed top-0 left-0 right-0 z-50 flex justify-between items-center py-6 bg-white dark:bg-gray-900/90 backdrop-blur-sm shadow-md",style:{height:"70px"}},_e={class:"flex items-center space-x-2",style:{"margin-left":"30px"}},he=["src"],be={class:"hidden md:flex items-center space-x-8 text-gray-600 dark:text-gray-400"},ye={class:"hover:text-primary cursor-pointer flex items-center"},we={class:"flex items-center space-x-4"},ke=["src"],xe=["src"],Ce={__name:"AppHeader",setup(E){const d=j(),c=F(),u=N,n=ge,_=fe,b=p=>{p.target.src=N},x=()=>{window.dispatchEvent(new CustomEvent("open-search-dialog"))},V=()=>{window.dispatchEvent(new CustomEvent("open-login-dialog"))},C=()=>{window.open("https://github.com/HazeHacker","_blank")},M=()=>{window.open("https://github.com/HazeHacker","_blank")},a=p=>{p==="logout"?(d.logout(),c.push("/")):p==="favorites"?c.push("/favorites"):p==="profile"&&c.push("/profile")},y=p=>{p==="friend-links"?c.push("/friend-links"):p==="about"&&c.push("/about")};return(p,s)=>{const $=m("router-link"),w=m("el-icon"),i=m("el-dropdown-item"),D=m("el-dropdown-menu"),U=m("el-dropdown"),S=m("el-button");return g(),k("header",ve,[o("div",_e,[o("img",{src:f(d).userInfo?.avatar||f(u),alt:"User avatar",class:"w-10 h-10 rounded-full",onError:b},null,40,he)]),o("nav",be,[e($,{to:"/home",class:"hover:text-primary"},{default:t(()=>[...s[0]||(s[0]=[r("首页",-1)])]),_:1}),e($,{to:"/articles",class:"hover:text-primary"},{default:t(()=>[...s[1]||(s[1]=[r("文章",-1)])]),_:1}),e($,{to:"/categories",class:"hover:text-primary"},{default:t(()=>[...s[2]||(s[2]=[r("分类",-1)])]),_:1}),e($,{to:"/tags",class:"hover:text-primary"},{default:t(()=>[...s[3]||(s[3]=[r("标签",-1)])]),_:1}),e($,{to:"/album",class:"hover:text-primary"},{default:t(()=>[...s[4]||(s[4]=[r("相册",-1)])]),_:1}),e(U,{onCommand:y,trigger:"hover"},{dropdown:t(()=>[e(D,null,{default:t(()=>[e(i,{command:"friend-links"},{default:t(()=>[e(w,{class:"mr-2"},{default:t(()=>[e(f(oe))]),_:1}),s[6]||(s[6]=r(" 友情链接 ",-1))]),_:1}),e(i,{command:"about"},{default:t(()=>[e(w,{class:"mr-2"},{default:t(()=>[e(f(te))]),_:1}),s[7]||(s[7]=r(" 关于我们 ",-1))]),_:1})]),_:1})]),default:t(()=>[o("span",ye,[s[5]||(s[5]=r(" 更多 ",-1)),e(w,{class:"ml-1"},{default:t(()=>[e(f(ee))]),_:1})])]),_:1})]),o("div",we,[e(S,{link:"",onClick:x},{default:t(()=>[e(w,null,{default:t(()=>[e(f(le))]),_:1})]),_:1}),e(S,{link:"",onClick:C},{default:t(()=>[o("img",{src:f(n),alt:"GitHub",class:"w-5 h-5 rounded-full"},null,8,ke)]),_:1}),e(S,{link:"",onClick:M},{default:t(()=>[o("img",{src:f(_),alt:"CSDN",class:"w-5 h-5 rounded-full"},null,8,xe)]),_:1}),f(d).token?(g(),z(U,{key:0,onCommand:a},{dropdown:t(()=>[e(D,null,{default:t(()=>[e(i,{command:"profile"},{default:t(()=>[...s[8]||(s[8]=[r("个人中心",-1)])]),_:1}),e(i,{command:"favorites"},{default:t(()=>[...s[9]||(s[9]=[r("我的收藏",-1)])]),_:1}),e(i,{command:"logout"},{default:t(()=>[...s[10]||(s[10]=[r("退出登录",-1)])]),_:1})]),_:1})]),default:t(()=>[e(S,{link:""},{default:t(()=>[e(w,null,{default:t(()=>[e(f(T))]),_:1})]),_:1})]),_:1})):(g(),z(S,{key:1,link:"",onClick:V},{default:t(()=>[e(w,null,{default:t(()=>[e(f(T))]),_:1})]),_:1})),e(me)])])}}},$e={},De={class:"bg-gray-100 dark:bg-gray-900/50 pt-16 pb-8 text-gray-600 dark:text-gray-400"};function Le(E,d){return g(),k("footer",De,[...d[0]||(d[0]=[q('<div class="container mx-auto px-4 sm:px-6 lg:px-8"><div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div><h3 class="font-bold text-lg text-gray-900 dark:text-white mb-4">Want to know me</h3><ul class="space-y-2"><li><a class="hover:text-primary" href="#">About me</a></li><li><a class="hover:text-primary" href="#">My projects</a></li><li><a class="hover:text-primary" href="#">My Skills</a></li></ul></div></div><div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700 text-center text-sm"><p>Powered by <a class="text-primary hover:underline" href="#">Hazenix</a></p><p class="mt-2">Copyright © 2024-2025 hazenix</p></div></div>',1)])])}const Ve=K($e,[["render",Le]]),Me={class:"mb-4"},Se={class:"max-h-96 overflow-y-auto"},He=["onClick"],ze={class:"font-semibold text-gray-900 dark:text-white"},Ee={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Ae={class:"flex items-center gap-2 mt-2 text-xs text-gray-500"},Be={key:0,class:"text-center py-8 text-gray-500"},Ge={__name:"SearchDialog",setup(E,{expose:d}){const c=F(),u=v(!1),n=v(""),_=v([]),b=v(!1),x=a=>de(a).format("YYYY-MM-DD"),V=async()=>{if(!n.value.trim()){L.warning("请输入搜索关键词");return}b.value=!0;try{const a=await pe({keyword:n.value,status:"0"});_.value=a.data||[]}catch(a){console.error("Search failed:",a),L.error("搜索失败"),_.value=[]}finally{b.value=!1}},C=a=>{c.push(`/article/${a.id}`),u.value=!1},M=()=>{n.value.trim()?c.push(`/search?q=${encodeURIComponent(n.value)}`):c.push("/search"),u.value=!1};return d({open:()=>{console.log("SearchDialog open method called, visible:",u.value),u.value=!0,console.log("SearchDialog visible set to:",u.value)}}),(a,y)=>{const p=m("el-button"),s=m("el-input"),$=m("el-dialog"),w=se("loading");return g(),z($,{modelValue:u.value,"onUpdate:modelValue":y[1]||(y[1]=i=>u.value=i),title:"搜索文章",width:"600px","z-index":999999,modal:!0,"append-to-body":!0},{default:t(()=>[e(s,{modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=i=>n.value=i),placeholder:"输入关键词搜索...",onKeyup:ne(V,["enter"]),class:"mb-4"},{append:t(()=>[e(p,{onClick:V},{default:t(()=>[...y[2]||(y[2]=[r("搜索",-1)])]),_:1})]),_:1},8,["modelValue"]),o("div",Me,[e(p,{type:"primary",plain:"",onClick:M,class:"w-full"},{default:t(()=>[...y[3]||(y[3]=[r(" 进入搜索页面查看更多结果 ",-1)])]),_:1})]),ae((g(),k("div",Se,[(g(!0),k(re,null,ie(_.value,i=>(g(),k("div",{key:i.id,class:"p-3 border-b hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:D=>C(i)},[o("h4",ze,G(i.title),1),o("p",Ee,G(i.summary||"暂无摘要"),1),o("div",Ae,[o("span",null,G(i.author||"匿名"),1),o("span",null,G(x(i.createTime)),1)])],8,He))),128)),_.value.length===0&&!b.value?(g(),k("div",Be," 暂无搜索结果 ")):I("",!0)])),[[w,b.value]])]),_:1},8,["modelValue"])}}},Ue={class:"login-card"},Fe={key:0,class:"login-method-selection"},Re={class:"social-login-buttons"},Te=["disabled"],Ne=["disabled"],je={key:1,class:"email-login-form"},qe={class:"captcha-container"},Ie={class:"captcha-text"},Ye={__name:"LoginDialog",setup(E,{expose:d}){const c=F(),u=j(),n=v(),_=v(!1),b=v(!1),x=v(!1),V=v(!1),C=v(!1),M=v(""),a=v({email:"",password:"",captcha:""}),y={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},p=()=>{const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let l="";for(let H=0;H<5;H++)l+=h.charAt(Math.floor(Math.random()*h.length));M.value=l},s=()=>{p()},$=()=>{C.value=!0,p()},w=()=>{C.value=!1},i=()=>{V.value=!0,C.value=!1,document.body.style.overflow="hidden"},D=()=>{V.value=!1,C.value=!1,document.body.style.overflow="",a.value={email:"",password:"",captcha:""},n.value&&n.value.resetFields()},U=()=>{D(),c.push("/register")},S=async()=>{try{if(await n.value.validate(),a.value.captcha.toLowerCase()!==M.value.toLowerCase()){L.error("验证码错误"),s();return}_.value=!0;const h={email:a.value.email,password:a.value.password};await u.login(h),L.success("登录成功"),D(),window.location.reload()}catch(h){h.message?L.error(h.message):L.error("登录失败"),s()}finally{_.value=!1}},O=async()=>{try{x.value=!0,L.info("GitHub登录功能正在开发中...")}catch(h){L.error("GitHub登录失败"),console.error("GitHub login error:",h)}finally{x.value=!1}},P=async()=>{try{b.value=!0;const l=(await W()).data;window.location.href=l}catch(h){L.error("获取Google授权链接失败"),console.error("Google login error:",h)}finally{b.value=!1}};return Y(()=>{p()}),d({open:i,close:D}),(h,l)=>{const H=m("el-input"),A=m("el-form-item"),R=m("el-button"),J=m("el-form");return V.value?(g(),k("div",{key:0,class:"login-dialog-overlay",onClick:D},[o("div",{class:"login-dialog-container",onClick:l[3]||(l[3]=ue(()=>{},["stop"]))},[o("div",Ue,[o("button",{onClick:D,class:"close-btn"},[...l[4]||(l[4]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),l[16]||(l[16]=o("div",{class:"login-header"},[o("h1",{class:"login-title"},"登录到 Hazenix's Blog "),o("p",{class:"login-subtitle"},"欢迎回来! 请登录您的账号")],-1)),C.value?(g(),k("div",je,[o("button",{onClick:w,class:"back-btn"},[...l[9]||(l[9]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),r(" 返回 ",-1)])]),e(J,{model:a.value,rules:y,ref_key:"formRef",ref:n,class:"login-form"},{default:t(()=>[e(A,{prop:"email"},{default:t(()=>[l[10]||(l[10]=o("label",{class:"form-label"},"邮箱",-1)),e(H,{modelValue:a.value.email,"onUpdate:modelValue":l[0]||(l[0]=B=>a.value.email=B),placeholder:"your@email.com",class:"form-input"},null,8,["modelValue"])]),_:1}),e(A,{prop:"password"},{default:t(()=>[l[11]||(l[11]=o("label",{class:"form-label"},"密码",-1)),e(H,{modelValue:a.value.password,"onUpdate:modelValue":l[1]||(l[1]=B=>a.value.password=B),type:"password",placeholder:"........",class:"form-input"},null,8,["modelValue"])]),_:1}),e(A,{prop:"captcha"},{default:t(()=>[l[12]||(l[12]=o("label",{class:"form-label"},"验证码",-1)),o("div",qe,[e(H,{modelValue:a.value.captcha,"onUpdate:modelValue":l[2]||(l[2]=B=>a.value.captcha=B),placeholder:"输入验证码",class:"captcha-input"},null,8,["modelValue"]),o("div",{class:"captcha-image",onClick:s},[o("span",Ie,G(M.value),1)])])]),_:1}),l[15]||(l[15]=o("div",{class:"forgot-password"},[o("a",{href:"#",class:"forgot-link"},[r("忘记密码? "),o("span",{class:"underline"},"点击这里重置")])],-1)),e(A,null,{default:t(()=>[e(R,{type:"primary",class:"login-btn",onClick:S,loading:_.value},{default:t(()=>[...l[13]||(l[13]=[r(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),e(A,null,{default:t(()=>[e(R,{class:"register-btn",onClick:U},{default:t(()=>[...l[14]||(l[14]=[r(" 没有账号? 注册 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])):(g(),k("div",Fe,[o("button",{class:"email-login-btn",onClick:$},[...l[5]||(l[5]=[o("svg",{class:"email-icon",viewBox:"0 0 24 24",width:"20",height:"20"},[o("path",{fill:"currentColor",d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),r(" 通过邮箱 登录 ",-1)])]),l[8]||(l[8]=o("div",{class:"divider"},[o("span",{class:"divider-text"},"或通过社交账号登录")],-1)),o("div",Re,[o("button",{class:"github-login-btn",onClick:O,disabled:x.value},[...l[6]||(l[6]=[o("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"20",height:"20"},[o("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),r(" GitHub ",-1)])],8,Te),o("button",{class:"google-login-btn",onClick:P,disabled:b.value},[...l[7]||(l[7]=[q('<svg class="google-icon" viewBox="0 0 24 24" width="20" height="20" data-v-782ba6ef><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-782ba6ef></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-782ba6ef></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-782ba6ef></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-782ba6ef></path></svg> Google ',2)])],8,Ne)])]))])])])):I("",!0)}}},Ke=K(Ye,[["__scopeId","data-v-782ba6ef"]]),Oe={class:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200"},Pe={class:"pt-20"},Je={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-8"},oo={__name:"AppLayout",setup(E){const d=v(),c=v(),u=()=>{d.value&&d.value.open()},n=()=>{c.value&&c.value.open()};return Y(()=>{window.addEventListener("open-search-dialog",u),window.addEventListener("open-login-dialog",n)}),ce(()=>{window.removeEventListener("open-search-dialog",u),window.removeEventListener("open-login-dialog",n)}),(_,b)=>{const x=m("router-view");return g(),k("div",Oe,[e(Ce),o("main",Pe,[o("div",Je,[e(x)])]),e(Ve),e(Ge,{ref_key:"searchDialogRef",ref:d},null,512),e(Ke,{ref_key:"loginDialogRef",ref:c},null,512)])}}};export{oo as default};
