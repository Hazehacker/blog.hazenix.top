import{e as j,f as m,g as x,o as c,w as t,h as n,a as e,m as Y,s as G,i as K,j as N,k as O,c as y,b as i,l as u,n as P,p as J,q as Q,t as W,v as R,x as U,u as B,d as X,r as w,y as Z,z as ee,A as te,B as F,F as oe,C as se,D as A,E as q,G as ae,H as ne,I as re,J as I}from"./index-BBqYyNLz.js";import{a as M}from"./avatar-Br5af8Id.js";import{_ as le}from"./githubLogo-CVgsuQiF.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as ie}from"./article-o4o8S-fg.js";import{L as de}from"./LoginDialog-i2rCHnRc.js";const ue={__name:"ThemeToggle",setup(S){const d=j();return(r,s)=>{const l=m("el-icon"),_=m("el-button");return c(),x(_,{link:"",onClick:s[0]||(s[0]=f=>n(d).toggleTheme()),class:"theme-toggle-button"},{default:t(()=>[n(d).isDark?(c(),x(l,{key:0},{default:t(()=>[e(n(Y))]),_:1})):(c(),x(l,{key:1},{default:t(()=>[e(n(G))]),_:1}))]),_:1})}}},ce="/assets/csdnLogo-BfhxAksU.png",pe={class:"fixed top-0 left-0 right-0 z-50 flex justify-between items-center py-6 bg-white dark:bg-gray-900/90 backdrop-blur-sm shadow-md",style:{height:"70px"}},me={class:"flex items-center space-x-2",style:{"margin-left":"30px"}},_e=["src"],fe={class:"hidden md:flex items-center space-x-8 text-gray-600 dark:text-gray-400"},ge={class:"hover:text-primary cursor-pointer flex items-center more-trigger"},ve={class:"flex items-center space-x-4",style:{"margin-right":"20px"}},he=["src"],ye=["src"],xe={__name:"AppHeader",setup(S){const d=K(),r=B(),s=U(),l=M,_=le,f=ce,$=p=>{p.target.src=M},b=()=>{window.dispatchEvent(new CustomEvent("open-search-dialog"))},k=()=>{window.dispatchEvent(new CustomEvent("open-login-dialog"))},H=()=>{window.open("https://github.com/HazeHacker","_blank")},g=()=>{window.open("https://github.com/HazeHacker","_blank")},v=p=>{p==="logout"?(d.logout(),r.push("/")):p==="favorites"?r.push("/favorites"):p==="profile"&&r.push("/profile")},L=p=>{p==="friend-links"?r.push("/friend-links"):p==="about"&&r.push("/about")},E=()=>{if(s.query&&s.query.login==="1"){k();const{login:p,...o}=s.query;r.replace({path:s.path,query:{...o}})}};return N(()=>{E()}),O(()=>s.query.login,()=>{E()}),(p,o)=>{const a=m("router-link"),h=m("el-icon"),C=m("el-dropdown-item"),T=m("el-dropdown-menu"),z=m("el-dropdown"),D=m("el-button");return c(),y("header",pe,[i("div",me,[i("img",{src:n(d).userInfo?.avatar||n(l),alt:"User avatar",class:"w-10 h-10 rounded-full",onError:$},null,40,_e)]),i("nav",fe,[e(a,{to:"/home",class:"hover:text-primary"},{default:t(()=>[...o[0]||(o[0]=[u("首页",-1)])]),_:1}),e(a,{to:"/articles",class:"hover:text-primary"},{default:t(()=>[...o[1]||(o[1]=[u("文章",-1)])]),_:1}),e(a,{to:"/categories",class:"hover:text-primary"},{default:t(()=>[...o[2]||(o[2]=[u("分类",-1)])]),_:1}),e(a,{to:"/tags",class:"hover:text-primary"},{default:t(()=>[...o[3]||(o[3]=[u("标签",-1)])]),_:1}),e(a,{to:"/album",class:"hover:text-primary"},{default:t(()=>[...o[4]||(o[4]=[u("相册",-1)])]),_:1}),e(a,{to:"/tree-hole",class:"hover:text-primary"},{default:t(()=>[...o[5]||(o[5]=[u("树洞",-1)])]),_:1}),e(z,{onCommand:L,trigger:"hover",class:"more-dropdown"},{dropdown:t(()=>[e(T,null,{default:t(()=>[e(C,{command:"friend-links"},{default:t(()=>[e(h,{class:"mr-2"},{default:t(()=>[e(n(J))]),_:1}),o[7]||(o[7]=u(" 友情链接 ",-1))]),_:1}),e(C,{command:"about"},{default:t(()=>[e(h,{class:"mr-2"},{default:t(()=>[e(n(Q))]),_:1}),o[8]||(o[8]=u(" 关于我 ",-1))]),_:1})]),_:1})]),default:t(()=>[i("span",ge,[o[6]||(o[6]=u(" 更多 ",-1)),e(h,{class:"ml-1"},{default:t(()=>[e(n(P))]),_:1})])]),_:1})]),i("div",ve,[e(D,{link:"",onClick:b},{default:t(()=>[e(h,null,{default:t(()=>[e(n(W))]),_:1})]),_:1}),e(D,{link:"",onClick:H},{default:t(()=>[i("img",{src:n(_),alt:"GitHub",class:"w-5 h-5 rounded-full"},null,8,he)]),_:1}),e(D,{link:"",onClick:g},{default:t(()=>[i("img",{src:n(f),alt:"CSDN",class:"w-5 h-5 rounded-full"},null,8,ye)]),_:1}),n(d).token&&n(d).userInfo?(c(),x(z,{key:0,onCommand:v},{dropdown:t(()=>[e(T,null,{default:t(()=>[e(C,{command:"profile"},{default:t(()=>[...o[9]||(o[9]=[u("个人中心",-1)])]),_:1}),e(C,{command:"favorites"},{default:t(()=>[...o[10]||(o[10]=[u("我的收藏",-1)])]),_:1}),e(C,{command:"logout"},{default:t(()=>[...o[11]||(o[11]=[u("退出登录",-1)])]),_:1})]),_:1})]),default:t(()=>[e(D,{link:""},{default:t(()=>[e(h,null,{default:t(()=>[e(n(R))]),_:1})]),_:1})]),_:1})):(c(),x(D,{key:1,link:"",onClick:k},{default:t(()=>[e(h,null,{default:t(()=>[e(n(R))]),_:1})]),_:1})),e(ue)])])}}},ke=V(xe,[["__scopeId","data-v-bec8469a"]]),we={},be={class:"bg-gray-100 dark:bg-gray-900/50 pt-16 pb-8 text-gray-600 dark:text-gray-400"};function Ce(S,d){return c(),y("footer",be,[...d[0]||(d[0]=[X('<div class="container mx-auto px-4 sm:px-6 lg:px-8"><div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div><h3 class="font-bold text-lg text-gray-900 dark:text-white mb-4">Want to know me</h3><ul class="space-y-2"><li><a class="hover:text-primary" href="#">About me</a></li><li><a class="hover:text-primary" href="#">My projects</a></li><li><a class="hover:text-primary" href="#">My Skills</a></li></ul></div></div><div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700 text-center text-sm"><p>Powered by <a class="text-primary hover:underline" href="#">Hazenix</a></p><p class="mt-2">Copyright © 2024-2025 hazenix</p></div></div>',1)])])}const De=V(we,[["render",Ce]]),Se={class:"mb-4"},$e={class:"max-h-96 overflow-y-auto"},Le=["onClick"],Ee={class:"font-semibold text-gray-900 dark:text-white"},Ae={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},He={class:"flex items-center gap-2 mt-2 text-xs text-gray-500"},Ve={key:0,class:"text-center py-8 text-gray-500"},Te={__name:"SearchDialog",setup(S,{expose:d}){const r=B(),s=w(!1),l=w(""),_=w([]),f=w(!1),$=g=>ae(g).format("YYYY-MM-DD"),b=async()=>{if(!l.value.trim()){q.warning("请输入搜索关键词");return}f.value=!0;try{const g=await ie({keyword:l.value,status:"0"});_.value=g.data||[]}catch(g){console.error("Search failed:",g),q.error("搜索失败"),_.value=[]}finally{f.value=!1}},k=g=>{r.push(`/article/${g.id}`),s.value=!1},H=()=>{l.value.trim()?r.push(`/search?q=${encodeURIComponent(l.value)}`):r.push("/search"),s.value=!1};return d({open:()=>{console.log("SearchDialog open method called, visible:",s.value),s.value=!0,console.log("SearchDialog visible set to:",s.value)}}),(g,v)=>{const L=m("el-button"),E=m("el-input"),p=m("el-dialog"),o=te("loading");return c(),x(p,{modelValue:s.value,"onUpdate:modelValue":v[1]||(v[1]=a=>s.value=a),title:"搜索文章",width:"600px","z-index":999999,modal:!0,"append-to-body":!0},{default:t(()=>[e(E,{modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=a=>l.value=a),placeholder:"输入关键词搜索...",onKeyup:ee(b,["enter"]),class:"mb-4"},{append:t(()=>[e(L,{onClick:b},{default:t(()=>[...v[2]||(v[2]=[u("搜索",-1)])]),_:1})]),_:1},8,["modelValue"]),i("div",Se,[e(L,{type:"primary",plain:"",onClick:H,class:"w-full"},{default:t(()=>[...v[3]||(v[3]=[u(" 进入搜索页面查看更多结果 ",-1)])]),_:1})]),Z((c(),y("div",$e,[(c(!0),y(oe,null,se(_.value,a=>(c(),y("div",{key:a.id,class:"p-3 border-b hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:h=>k(a)},[i("h4",Ee,A(a.title),1),i("p",Ae,A(a.summary||"暂无摘要"),1),i("div",He,[i("span",null,A(a.author||"匿名"),1),i("span",null,A($(a.createTime)),1)])],8,Le))),128)),_.value.length===0&&!f.value?(c(),y("div",Ve," 暂无搜索结果 ")):F("",!0)])),[[o,f.value]])]),_:1},8,["modelValue"])}}},ze={class:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200"},Re={__name:"AppLayout",setup(S){const d=U(),r=w(),s=w(),l=ne(()=>d.name==="TreeHole"),_=()=>{r.value&&r.value.open()},f=()=>{s.value&&s.value.open()};return N(()=>{window.addEventListener("open-search-dialog",_),window.addEventListener("open-login-dialog",f)}),re(()=>{window.removeEventListener("open-search-dialog",_),window.removeEventListener("open-login-dialog",f)}),($,b)=>{const k=m("router-view");return c(),y("div",ze,[e(ke),i("main",{class:I(l.value?"tree-hole-main":"pt-20")},[i("div",{class:I(l.value?"":"container mx-auto px-4 sm:px-6 lg:px-8 py-8")},[e(k)],2)],2),l.value?F("",!0):(c(),x(De,{key:0})),e(Te,{ref_key:"searchDialogRef",ref:r},null,512),e(de,{ref_key:"loginDialogRef",ref:s},null,512)])}}},Fe=V(Re,[["__scopeId","data-v-69f6162c"]]);export{Fe as default};
