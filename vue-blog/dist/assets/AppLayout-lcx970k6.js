import{f as oe,d as f,g as b,o as i,w as t,h as m,a as e,m as ae,s as se,i as re,r as A,j as P,k as F,l as R,c as D,b as o,e as c,F as J,n as Q,t as T,p as ne,q as le,v as ie,x as de,y as ue,z as W,u as B,A as X,B as Z,C as ce,D as Y,E as pe,G as me,H as fe,I as _e,J as ee,K as G,L as ge,M as K}from"./index-Cr_Or7lo.js";import{g as ve}from"./category-C19aqy6Z.js";import{g as te}from"./article-CsEU7-wh.js";import{a as O}from"./avatar-Br5af8Id.js";import{_ as he}from"./githubLogo-CVgsuQiF.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as ye}from"./LoginDialog-CLDHvGsk.js";const xe={__name:"ThemeToggle",setup(S){const p=oe();return(l,r)=>{const d=f("el-icon"),_=f("el-button");return i(),b(_,{link:"",onClick:r[0]||(r[0]=v=>m(p).toggleTheme()),class:"theme-toggle-button"},{default:t(()=>[m(p).isDark?(i(),b(d,{key:0},{default:t(()=>[e(m(ae))]),_:1})):(i(),b(d,{key:1},{default:t(()=>[e(m(se))]),_:1}))]),_:1})}}},we="/assets/csdnLogo-BfhxAksU.png",ke={class:"fixed top-0 left-0 right-0 z-50 flex justify-between items-center py-6 bg-white dark:bg-gray-900/90 backdrop-blur-sm shadow-md",style:{height:"70px"}},be={class:"flex items-center space-x-2",style:{"margin-left":"30px"}},Ce=["src"],$e={class:"hidden md:flex items-center space-x-8 text-gray-600 dark:text-gray-400"},Ae={class:"article-menu-wrapper"},Le={class:"category-name"},De={class:"category-count"},Ee={class:"hover:text-primary cursor-pointer flex items-center more-trigger"},He={class:"flex items-center space-x-4",style:{"margin-right":"20px"}},Te=["src"],Se=["src"],Ie=["src"],ze={__name:"AppHeader",setup(S){const p=re(),l=B(),r=W(),d=O,_=he,v=we,y=A([]),n=A(!1),x=P(()=>{const u=p.userInfo?.avatar;return p.userInfo,u||d}),E=u=>{u.target.src=O};F(()=>p.userInfo,u=>{},{deep:!0,immediate:!0});const w=()=>{window.dispatchEvent(new CustomEvent("open-search-dialog"))},g=()=>{window.dispatchEvent(new CustomEvent("open-login-dialog"))},I=()=>{window.open("https://github.com/HazeHacker","_blank")},V=()=>{window.open("https://github.com/HazeHacker","_blank")},M=async u=>{u==="logout"?(await p.logout(),l.replace("/home")):u==="favorites"?l.push("/favorites"):u==="profile"&&l.push("/profile")},U=u=>{u==="friend-links"?l.push("/friend-links"):u==="about"&&l.push("/about")},h=u=>{l.push(`/articles?categoryId=${u}`)},N=async()=>{n.value=!0;try{const s=(await ve()).data||[];let k=[];try{const a=await te();a&&a.data&&(Array.isArray(a.data)?k=a.data:a.data.list&&Array.isArray(a.data.list)?k=a.data.list:Array.isArray(a.data.records)&&(k=a.data.records))}catch{}const C=k.filter(a=>!(a.id===1||a.id==="1"||a.status!==0&&a.status!=="0")),L=new Map;C.forEach(a=>{const $=a.categoryId||a.category?.id;$&&L.set($,(L.get($)||0)+1)});const H=s.map(a=>({...a,articleCount:L.get(a.id)||0})).filter(a=>a.articleCount>0);y.value=H}catch{y.value=[]}finally{n.value=!1}},j=()=>{if(r.query&&r.query.login==="1"){g();const{login:u,...s}=r.query;l.replace({path:r.path,query:{...s}})}};return R(()=>{j(),N()}),F(()=>r.query.login,()=>{j()}),(u,s)=>{const k=f("router-link"),C=f("el-dropdown-item"),L=f("el-dropdown-menu"),H=f("el-dropdown"),a=f("el-icon"),$=f("el-button");return i(),D("header",ke,[o("div",be,[o("img",{src:x.value,alt:"User avatar",class:"w-10 h-10 rounded-full",onError:E},null,40,Ce)]),o("nav",$e,[e(k,{to:"/home",class:"hover:text-primary"},{default:t(()=>[...s[0]||(s[0]=[c("首页",-1)])]),_:1}),e(H,{onCommand:h,trigger:"hover",class:"article-dropdown"},{dropdown:t(()=>[y.value.length>0?(i(),b(L,{key:0},{default:t(()=>[(i(!0),D(J,null,Q(y.value,z=>(i(),b(C,{key:z.id,command:z.id,class:"category-item"},{default:t(()=>[o("span",Le,T(z.name),1),o("span",De,"("+T(z.articleCount)+")",1)]),_:2},1032,["command"]))),128))]),_:1})):(i(),b(L,{key:1},{default:t(()=>[e(C,{disabled:""},{default:t(()=>[...s[2]||(s[2]=[c("暂无分类",-1)])]),_:1})]),_:1}))]),default:t(()=>[o("div",Ae,[e(k,{to:"/articles",class:"hover:text-primary article-link"},{default:t(()=>[...s[1]||(s[1]=[c(" 文章 ",-1)])]),_:1})])]),_:1}),e(k,{to:"/tags",class:"hover:text-primary"},{default:t(()=>[...s[3]||(s[3]=[c("标签",-1)])]),_:1}),e(k,{to:"/album",class:"hover:text-primary"},{default:t(()=>[...s[4]||(s[4]=[c("相册",-1)])]),_:1}),e(k,{to:"/tree-hole",class:"hover:text-primary"},{default:t(()=>[...s[5]||(s[5]=[c("树洞",-1)])]),_:1}),e(H,{onCommand:U,trigger:"hover",class:"more-dropdown"},{dropdown:t(()=>[e(L,null,{default:t(()=>[e(C,{command:"friend-links"},{default:t(()=>[e(a,{class:"mr-2"},{default:t(()=>[e(m(le))]),_:1}),s[7]||(s[7]=c(" 友情链接 ",-1))]),_:1}),e(C,{command:"about"},{default:t(()=>[e(a,{class:"mr-2"},{default:t(()=>[e(m(ie))]),_:1}),s[8]||(s[8]=c(" 关于我 ",-1))]),_:1})]),_:1})]),default:t(()=>[o("span",Ee,[s[6]||(s[6]=c(" 更多 ",-1)),e(a,{class:"ml-1"},{default:t(()=>[e(m(ne))]),_:1})])]),_:1})]),o("div",He,[e($,{link:"",onClick:w},{default:t(()=>[e(a,null,{default:t(()=>[e(m(de))]),_:1})]),_:1}),e($,{link:"",onClick:I},{default:t(()=>[o("img",{src:m(_),alt:"GitHub",class:"w-5 h-5 rounded-full"},null,8,Te)]),_:1}),e($,{link:"",onClick:V},{default:t(()=>[o("img",{src:m(v),alt:"CSDN",class:"w-5 h-5 rounded-full"},null,8,Se)]),_:1}),m(p).token&&m(p).userInfo?(i(),b(H,{key:0,onCommand:M},{dropdown:t(()=>[e(L,null,{default:t(()=>[e(C,{command:"profile"},{default:t(()=>[...s[9]||(s[9]=[c("个人中心",-1)])]),_:1}),e(C,{command:"favorites"},{default:t(()=>[...s[10]||(s[10]=[c("我的收藏",-1)])]),_:1}),e(C,{command:"logout"},{default:t(()=>[...s[11]||(s[11]=[c("退出登录",-1)])]),_:1})]),_:1})]),default:t(()=>[e($,{link:""},{default:t(()=>[o("img",{src:x.value,alt:"User avatar",class:"w-8 h-8 rounded-full cursor-pointer",onError:E},null,40,Ie)]),_:1})]),_:1})):(i(),b($,{key:1,link:"",onClick:g},{default:t(()=>[e(a,null,{default:t(()=>[e(m(ue))]),_:1})]),_:1})),e(xe)])])}}},Ve=q(ze,[["__scopeId","data-v-a333817e"]]),Me={class:"relative bg-gray-100 dark:bg-gray-900/50 text-gray-600 dark:text-gray-400",style:{"background-color":"rgb(242, 248, 255)"}},Ue={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-6"},Re={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Be={class:"space-y-2 text-sm"},qe={class:"space-y-2 text-sm"},Ne={class:"space-y-2 text-sm"},je=["href"],Fe="L3542495583@outlook.com",Ye="https://github.com/HazeHacker",Ge={__name:"AppFooter",setup(S){const p=B(),l=A(!1),r=()=>{const y=window.pageYOffset||document.documentElement.scrollTop;l.value=y>300},d=()=>{window.scrollTo({top:0,behavior:"smooth"})},_=()=>{p.push("/messageboard")},v=()=>{p.push("/history")};return R(()=>{window.addEventListener("scroll",r),r()}),X(()=>{window.removeEventListener("scroll",r)}),(y,n)=>{const x=f("router-link"),E=f("el-icon");return i(),D("footer",Me,[o("div",Ue,[o("div",Re,[o("div",null,[n[2]||(n[2]=o("h3",{class:"font-bold text-base text-gray-900 dark:text-white mb-4"}," 想要了解我> ",-1)),o("ul",Be,[o("li",null,[e(x,{to:"/about",class:"hover:text-primary transition-colors"},{default:t(()=>[...n[0]||(n[0]=[c(" 关于我 ",-1)])]),_:1})]),o("li",null,[o("a",{href:"#",class:"hover:text-primary transition-colors",onClick:Y(v,["prevent"])}," 本站历史 ")]),o("li",null,[e(x,{to:"/about-project",class:"hover:text-primary transition-colors"},{default:t(()=>[...n[1]||(n[1]=[c(" 关于此项目 ",-1)])]),_:1})])])]),o("div",null,[n[4]||(n[4]=o("h3",{class:"font-bold text-base text-gray-900 dark:text-white mb-4"}," 你也许在找> ",-1)),o("ul",qe,[o("li",null,[e(x,{to:"/friend-links",class:"hover:text-primary transition-colors"},{default:t(()=>[...n[3]||(n[3]=[c(" 友链 ",-1)])]),_:1})])])]),o("div",null,[n[5]||(n[5]=o("h3",{class:"font-bold text-base text-gray-900 dark:text-white mb-4"}," 联系我叭> ",-1)),o("ul",Ne,[o("li",null,[o("a",{href:"#",class:"hover:text-primary transition-colors",onClick:Y(_,["prevent"])}," 写留言 ")]),o("li",null,[o("a",{href:`mailto:${Fe}`,class:"hover:text-primary transition-colors"}," 发邮件 ",8,je)]),o("li",null,[o("a",{href:Ye,target:"_blank",rel:"noopener noreferrer",class:"hover:text-primary transition-colors"}," GitHub ")])])])]),n[6]||(n[6]=ce('<div class="pt-4 border-t border-gray-200 dark:border-gray-700" data-v-d84ea8f6><div class="flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-gray-500 dark:text-gray-400" data-v-d84ea8f6><div class="flex flex-col md:flex-row items-center gap-2 md:gap-4" data-v-d84ea8f6><p data-v-d84ea8f6>湘ICP备2025144995号</p><p class="hidden md:inline" data-v-d84ea8f6>|</p><p data-v-d84ea8f6>Copyright © 2025-2026 Hazenix. 保留所有权利。</p></div><div class="flex items-center gap-2" data-v-d84ea8f6><p data-v-d84ea8f6>Powered by</p><a href="https://github.com/HazeHacker" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline" data-v-d84ea8f6> Hazenix Blog </a></div></div></div>',1))]),Z(o("button",{onClick:d,class:"fixed bottom-8 right-8 bg-primary text-white p-3 rounded-full shadow-lg hover:bg-blue-600 transition-all duration-300 z-50 flex items-center justify-center",style:{width:"48px",height:"48px"},"aria-label":"返回顶部"},[e(E,{size:20},{default:t(()=>[e(m(me))]),_:1})],512),[[pe,l.value]])])}}},Ke=q(Ge,[["__scopeId","data-v-d84ea8f6"]]),Oe={class:"mb-4"},Pe={class:"max-h-96 overflow-y-auto"},Je=["onClick"],Qe={class:"font-semibold text-gray-900 dark:text-white"},We={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Xe={class:"flex items-center gap-2 mt-2 text-xs text-gray-500"},Ze={key:0,class:"text-center py-8 text-gray-500"},et={__name:"SearchDialog",setup(S,{expose:p}){const l=B(),r=A(!1),d=A(""),_=A([]),v=A(!1),y=w=>ge(w).format("YYYY-MM-DD"),n=async()=>{if(!d.value.trim()){G.warning("请输入搜索关键词");return}v.value=!0;try{const w=await te({keyword:d.value,status:"0"});_.value=w.data||[]}catch{G.error("搜索失败"),_.value=[]}finally{v.value=!1}},x=w=>{const g=w.slug||w.id;l.push({name:"ArticleDetail",params:{id:g}}),r.value=!1},E=()=>{d.value.trim()?l.push(`/search?q=${encodeURIComponent(d.value)}`):l.push("/search"),r.value=!1};return p({open:()=>{r.value=!0}}),(w,g)=>{const I=f("el-button"),V=f("el-input"),M=f("el-dialog"),U=_e("loading");return i(),b(M,{modelValue:r.value,"onUpdate:modelValue":g[1]||(g[1]=h=>r.value=h),title:"搜索文章",width:"600px","z-index":999999,modal:!0,"append-to-body":!0},{default:t(()=>[e(V,{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=h=>d.value=h),placeholder:"输入关键词搜索...",onKeyup:fe(n,["enter"]),class:"mb-4"},{append:t(()=>[e(I,{onClick:n},{default:t(()=>[...g[2]||(g[2]=[c("搜索",-1)])]),_:1})]),_:1},8,["modelValue"]),o("div",Oe,[e(I,{type:"primary",plain:"",onClick:E,class:"w-full"},{default:t(()=>[...g[3]||(g[3]=[c(" 进入搜索页面查看更多结果 ",-1)])]),_:1})]),Z((i(),D("div",Pe,[(i(!0),D(J,null,Q(_.value,h=>(i(),D("div",{key:h.id,class:"p-3 border-b hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:N=>x(h)},[o("h4",Qe,T(h.title),1),o("p",We,T(h.summary||"暂无摘要"),1),o("div",Xe,[o("span",null,T(y(h.createTime)),1)])],8,Je))),128)),_.value.length===0&&!v.value?(i(),D("div",Ze," 暂无搜索结果 ")):ee("",!0)])),[[U,v.value]])]),_:1},8,["modelValue"])}}},tt={class:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200"},ot={__name:"AppLayout",setup(S){const p=W(),l=A(),r=A(),d=P(()=>p.name==="TreeHole"),_=()=>{l.value&&l.value.open()},v=()=>{r.value&&r.value.open()};return R(()=>{window.addEventListener("open-search-dialog",_),window.addEventListener("open-login-dialog",v)}),X(()=>{window.removeEventListener("open-search-dialog",_),window.removeEventListener("open-login-dialog",v)}),(y,n)=>{const x=f("router-view");return i(),D("div",tt,[e(Ve),o("main",{class:K(d.value?"tree-hole-main":"pt-20")},[o("div",{class:K(d.value?"":"container mx-auto px-4 sm:px-6 lg:px-8 py-8")},[e(x)],2)],2),d.value?ee("",!0):(i(),b(Ke,{key:0})),e(et,{ref_key:"searchDialogRef",ref:l},null,512),e(ye,{ref_key:"loginDialogRef",ref:r},null,512)])}}},ut=q(ot,[["__scopeId","data-v-69f6162c"]]);export{ut as default};
