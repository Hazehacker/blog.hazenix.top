import{r as t,o as h,c as d,k as v,e as y,Q as A,H as o,h as k,b as c}from"./index-BjRrW_j8.js";import{a as s}from"./admin-C4GflvBV.js";import{_ as E}from"./LoadingSpinner-RrWrbirh.js";import{T as w}from"./ToastUIEditor-BJjgid8i.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"article-edit"},R={key:0,class:"flex justify-center py-8"},T={__name:"ArticleEdit",setup(B){const n=A(),r=k(),i=t(!0),l=t(null),u=t([]),m=t([]),p=async()=>{try{const e=await s.getArticle(n.params.id);l.value=e.data}catch(e){console.error("获取文章详情失败:",e),o.error("获取文章详情失败"),r.push("/admin/articles")}},_=async()=>{try{const[e,a]=await Promise.all([s.getCategories(),s.getTags()]);u.value=e.data,m.value=a.data}catch(e){console.error("加载分类和标签失败:",e)}},f=async e=>{try{await s.updateArticle(n.params.id,e),o.success("文章更新成功"),r.push("/admin/articles")}catch(a){console.error("更新文章失败:",a),o.error("更新文章失败，请重试")}},g=()=>{r.push("/admin/articles")};return h(async()=>{await Promise.all([p(),_()]),i.value=!1}),(e,a)=>(c(),d("div",C,[i.value?(c(),d("div",R,[y(E)])):(c(),v(w,{key:1,article:l.value,onSave:f,onCancel:g},null,8,["article"]))]))}},j=x(T,[["__scopeId","data-v-12b3c778"]]);export{j as default};
