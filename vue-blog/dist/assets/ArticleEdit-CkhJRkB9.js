import{r as t,j as h,c as d,o,g as v,a as y,x as A,E as c,u as E}from"./index-BBqYyNLz.js";import{a as s}from"./admin-D9Y3aL4T.js";import{_ as k}from"./LoadingSpinner-BDhi2Jtp.js";import{T as x}from"./ToastUIEditor-BGU61-2z.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"article-edit"},R={key:0,class:"flex justify-center py-8"},T={__name:"ArticleEdit",setup(B){const n=A(),r=E(),i=t(!0),l=t(null),u=t([]),m=t([]),p=async()=>{try{const e=await s.getArticle(n.params.id);l.value=e.data}catch(e){console.error("获取文章详情失败:",e),c.error("获取文章详情失败"),r.push("/admin/articles")}},_=async()=>{try{const[e,a]=await Promise.all([s.getCategories(),s.getTags()]);u.value=e.data,m.value=a.data}catch(e){console.error("加载分类和标签失败:",e)}},f=async e=>{try{await s.updateArticle(n.params.id,e),c.success("文章更新成功"),r.push("/admin/articles")}catch(a){console.error("更新文章失败:",a),c.error("更新文章失败，请重试")}},g=()=>{r.push("/admin/articles")};return h(async()=>{await Promise.all([p(),_()]),i.value=!1}),(e,a)=>(o(),d("div",C,[i.value?(o(),d("div",R,[y(k)])):(o(),v(x,{key:1,article:l.value,onSave:f,onCancel:g},null,8,["article"]))]))}},b=w(T,[["__scopeId","data-v-12b3c778"]]);export{b as default};
