import{r as o,l as h,c as d,o as t,g as v,a as y,z as T,K as c,u as A}from"./index-cinz6B6s.js";import{a}from"./admin-BqhwTfVE.js";import{_ as k}from"./LoadingSpinner-FoJTtNJ-.js";import{T as E}from"./ToastUIEditor-rmylegky.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={class:"article-edit"},C={key:0,class:"flex justify-center py-8"},R={__name:"ArticleEdit",setup(B){const n=T(),r=A(),i=o(!0),l=o(null),u=o([]),p=o([]),m=async()=>{try{const e=await a.getArticle(n.params.id);l.value=e.data}catch(e){console.error("获取文章详情失败:",e),c.error("获取文章详情失败"),r.push("/admin/articles")}},_=async()=>{try{const[e,s]=await Promise.all([a.getCategories(),a.getTags()]);u.value=e.data,p.value=s.data}catch(e){console.error("加载分类和标签失败:",e)}},f=async e=>{try{e.isTop===void 0||e.isTop===null?e.isTop=0:e.isTop=e.isTop===!0||e.isTop===1?1:0,console.log("准备保存文章数据:",e),await a.updateArticle(n.params.id,e),c.success("文章更新成功"),r.push("/admin/articles")}catch(s){console.error("更新文章失败:",s),c.error("更新文章失败，请重试")}},g=()=>{r.push("/admin/articles")};return h(async()=>{await Promise.all([m(),_()]),i.value=!1}),(e,s)=>(t(),d("div",x,[i.value?(t(),d("div",C,[y(k)])):(t(),v(E,{key:1,article:l.value,onSave:f,onCancel:g},null,8,["article"]))]))}},j=w(R,[["__scopeId","data-v-96b3cec3"]]);export{j as default};
