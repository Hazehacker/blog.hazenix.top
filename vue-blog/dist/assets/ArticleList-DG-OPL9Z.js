import{V as ae,G as j,r as S,W as A,H as se,j as le,c as u,o as i,b as s,a as o,w as d,z as oe,f as y,h as p,X as ne,B as x,F as z,C as M,x as re,E as ie,u as de,l as L,t as F,g as E,D as k,v as ce,Y as ue,O as me,Q as _e,K as ge}from"./index-BBqYyNLz.js";import{g as pe}from"./article-o4o8S-fg.js";import{g as fe}from"./category-DfyCxCOQ.js";import{g as ve}from"./tag-ktS41Xty.js";import{s as ye}from"./seo-BkU-ml2H.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";var D={exports:{}},ke=D.exports,N;function Ce(){return N||(N=1,(function(n,f){(function(h,m){n.exports=m(ae())})(ke,(function(h){function m(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var Y=m(h),v={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(c,_){return _==="W"?c+"周":c+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(c,_){var l=100*c+_;return l<600?"凌晨":l<900?"早上":l<1100?"上午":l<1300?"中午":l<1800?"下午":"晚上"}};return Y.default.locale(v,null,!0),v}))})(D)),D.exports}Ce();j.locale("zh-cn");function Ye(n,f="YYYY-MM-DD HH:mm:ss"){return n?j(n).format(f):""}function U(n){return n<1e3?n.toString():n<1e6?(n/1e3).toFixed(1)+"K":n<1e9?(n/1e6).toFixed(1)+"M":(n/1e9).toFixed(1)+"B"}function we(n,f,h="..."){return!n||n.length<=f?n:n.substring(0,f)+h}function be(n,f=150){if(!n)return"";const h=n.replace(/#{1,6}\s+/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/!\[([^\]]*)\]\([^)]+\)/g,"").replace(/\n+/g," ").trim();return we(h,f)}const Ie={class:"article-list-page"},Se={class:"search-section"},Ve={class:"search-container"},xe={class:"search-box"},ze={class:"filter-container"},Me={class:"filter-row"},Le={class:"filter-item"},De={class:"filter-item"},Re={class:"filter-item"},Te={class:"filter-actions"},Ee={class:"articles-section"},He={class:"articles-container"},Pe={key:0,class:"loading-container"},Ae={key:1,class:"empty-state"},Fe={key:2,class:"articles-list"},Ne=["onClick"],Ue={key:0,class:"article-cover"},je=["src","alt"],$e={class:"article-content"},Be={class:"article-title"},qe={class:"article-summary"},Oe={class:"article-meta"},Ke={class:"meta-item"},Qe={class:"meta-item"},We={class:"meta-item"},Ze={class:"meta-item"},Ge={key:0,class:"article-tags"},Je={key:0,class:"more-tags"},Xe={key:0,class:"pagination-container"},et={__name:"ArticleList",setup(n){const f=de(),h=re(),m=S([]),Y=S([]),v=S([]),c=S(!1),_=S(0),l=A({keyword:"",categoryId:"",tagId:"",timeRange:""}),g=A({page:1,pageSize:10});se(()=>l.keyword||l.categoryId||l.tagId||l.timeRange);const w=async()=>{c.value=!0;try{const a={keyword:l.keyword,categoryId:l.categoryId,tagId:l.tagId,status:"0",page:g.page,pageSize:g.pageSize},e=await pe(a);console.log("Article list response:",e),e&&e.data?Array.isArray(e.data)?(m.value=e.data,_.value=e.total||e.data.length):e.data.records?(m.value=e.data.records,_.value=e.data.total||e.data.records.length):e.data.list?(m.value=e.data.list,_.value=e.data.total||e.data.list.length):(m.value=e.data,_.value=e.total||e.data.length):(m.value=[],_.value=0)}catch(a){console.error("Failed to load articles:",a),ie.error("加载文章列表失败"),m.value=[{id:1,title:"Vue3博客系统开发指南",summary:"本文介绍了如何使用Vue3、Element Plus和Tailwind CSS构建一个现代化的博客系统...",content:`# Vue3博客系统开发指南

本文介绍了如何使用Vue3、Element Plus和Tailwind CSS构建一个现代化的博客系统...`,author:"Hazenix",createTime:"2025-01-01",viewCount:100,tags:[{id:1,name:"Vue3"},{id:2,name:"前端"}]},{id:2,title:"Element Plus组件库使用技巧",summary:"深入解析Element Plus组件库的高级用法和最佳实践...",content:`# Element Plus组件库使用技巧

深入解析Element Plus组件库的高级用法和最佳实践...`,author:"Hazenix",createTime:"2025-01-02",viewCount:80,tags:[{id:3,name:"Element Plus"},{id:2,name:"前端"}]}],_.value=2}finally{c.value=!1}},$=async()=>{try{const e=(await fe()).data||[];Y.value=e.filter(r=>r.articleCount>0)}catch(a){console.error("Failed to load categories:",a),Y.value=[{id:1,name:"技术"},{id:2,name:"生活"},{id:3,name:"随笔"}]}},B=async()=>{try{const a=await ve();v.value=a.data||[]}catch(a){console.error("Failed to load tags:",a),v.value=[{id:1,name:"Vue3"},{id:2,name:"前端"},{id:3,name:"Element Plus"},{id:4,name:"JavaScript"}]}},R=()=>{g.page=1,w()},V=()=>{g.page=1,w()},H=()=>{Object.assign(l,{keyword:"",categoryId:"",tagId:"",timeRange:""}),g.page=1,w()},q=a=>{g.pageSize=a,g.page=1,w()},O=a=>{g.page=a,w()},K=a=>{f.push(`/article/${a}`)},P=a=>{if(typeof a=="object"&&a!==null)return a.name;const e=v.value.find(r=>r.id===a);return e?e.name:a},Q=a=>{l.tagId=v.value.find(e=>e.name===a)?.id||"",V()},W=()=>{const a=h.query;if(a.tagId)l.tagId=a.tagId;else if(a.tag){const e=decodeURIComponent(a.tag),r=v.value.find(C=>C.name===e);r?l.tagId=r.id:l.tagId=e}if(a.category){const e=decodeURIComponent(a.category),r=Y.value.find(C=>C.name===e);r&&(l.categoryId=r.id)}a.keyword&&(l.keyword=decodeURIComponent(a.keyword)),a.timeRange&&(l.timeRange=a.timeRange)},Z=()=>{ye({title:"文章列表",description:"探索我们的精彩文章，发现新的知识和见解",keywords:["文章","博客","技术","前端","Vue3"],structuredData:{"@context":"https://schema.org","@type":"CollectionPage",name:"文章列表",description:"探索我们的精彩文章，发现新的知识和见解",url:window.location.href}})};return le(async()=>{Z(),await Promise.all([$(),B()]),W(),w()}),(a,e)=>{const r=y("el-icon"),C=y("el-button"),G=y("el-input"),b=y("el-option"),T=y("el-select"),J=y("el-skeleton"),X=y("el-empty"),ee=y("el-tag"),te=y("el-pagination");return i(),u("div",Ie,[e[12]||(e[12]=s("div",{class:"page-header"},[s("div",{class:"header-content"},[s("h1",{class:"page-title"},"文章列表"),s("p",{class:"page-description"},"探索我们的精彩文章，发现新的知识和见解")])],-1)),s("div",Se,[s("div",Ve,[s("div",xe,[o(G,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>l.keyword=t),placeholder:"搜索文章标题、内容或标签...",size:"large",clearable:"",onKeyup:oe(R,["enter"]),onClear:R},{prefix:d(()=>[o(r,null,{default:d(()=>[o(p(F))]),_:1})]),append:d(()=>[o(C,{onClick:R,type:"primary"},{default:d(()=>[o(r,null,{default:d(()=>[o(p(F))]),_:1}),e[6]||(e[6]=L(" 搜索 ",-1))]),_:1})]),_:1},8,["modelValue"])]),s("div",ze,[s("div",Me,[s("div",Le,[e[7]||(e[7]=s("label",{class:"filter-label"},"分类",-1)),o(T,{modelValue:l.categoryId,"onUpdate:modelValue":e[1]||(e[1]=t=>l.categoryId=t),placeholder:"选择分类",clearable:"",onChange:V,class:"filter-select"},{default:d(()=>[(i(!0),u(z,null,M(Y.value,t=>(i(),E(b,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s("div",De,[e[8]||(e[8]=s("label",{class:"filter-label"},"标签",-1)),o(T,{modelValue:l.tagId,"onUpdate:modelValue":e[2]||(e[2]=t=>l.tagId=t),placeholder:"选择标签",clearable:"",onChange:V,class:"filter-select"},{default:d(()=>[(i(!0),u(z,null,M(v.value,t=>(i(),E(b,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s("div",Re,[e[9]||(e[9]=s("label",{class:"filter-label"},"时间",-1)),o(T,{modelValue:l.timeRange,"onUpdate:modelValue":e[3]||(e[3]=t=>l.timeRange=t),placeholder:"时间范围",onChange:V,class:"filter-select"},{default:d(()=>[o(b,{label:"全部时间",value:""}),o(b,{label:"最近一周",value:"week"}),o(b,{label:"最近一月",value:"month"}),o(b,{label:"最近一年",value:"year"})]),_:1},8,["modelValue"])]),s("div",Te,[o(C,{onClick:H,icon:p(ne)},{default:d(()=>[...e[10]||(e[10]=[L("重置",-1)])]),_:1},8,["icon"])])])])])]),s("div",Ee,[s("div",He,[c.value?(i(),u("div",Pe,[o(J,{rows:5,animated:""})])):m.value.length===0?(i(),u("div",Ae,[o(X,{description:"暂无文章"},{default:d(()=>[o(C,{type:"primary",onClick:H},{default:d(()=>[...e[11]||(e[11]=[L("查看全部文章",-1)])]),_:1})]),_:1})])):(i(),u("div",Fe,[(i(!0),u(z,null,M(m.value,t=>(i(),u("div",{key:t.id,class:"article-card",onClick:I=>K(t.id)},[t.coverImage||t.cover?(i(),u("div",Ue,[s("img",{src:t.coverImage||t.cover,alt:t.title,class:"cover-image"},null,8,je)])):x("",!0),s("div",$e,[s("h2",Be,k(t.title),1),s("p",qe,k(t.summary||p(be)(t.content)),1),s("div",Oe,[s("div",Ke,[o(r,null,{default:d(()=>[o(p(ce))]),_:1}),s("span",null,k(t.authorName||t.author),1)]),s("div",Qe,[o(r,null,{default:d(()=>[o(p(ue))]),_:1}),s("span",null,k(p(Ye)(t.createTime||t.createdAt)),1)]),s("div",We,[o(r,null,{default:d(()=>[o(p(me))]),_:1}),s("span",null,k(p(U)(t.viewCount||t.views||0)),1)]),s("div",Ze,[o(r,null,{default:d(()=>[o(p(_e))]),_:1}),s("span",null,k(p(U)(t.commentCount||t.comments||0)),1)])]),t.tags&&t.tags.length>0?(i(),u("div",Ge,[(i(!0),u(z,null,M(t.tags.slice(0,3),I=>(i(),E(ee,{key:I.id||I,size:"small",type:"info",class:"tag-item",onClick:ge(tt=>Q(P(I)),["stop"])},{default:d(()=>[L(k(P(I)),1)]),_:2},1032,["onClick"]))),128)),t.tags.length>3?(i(),u("span",Je," +"+k(t.tags.length-3),1)):x("",!0)])):x("",!0)])],8,Ne))),128))]))]),_.value>0?(i(),u("div",Xe,[o(te,{"current-page":g.page,"onUpdate:currentPage":e[4]||(e[4]=t=>g.page=t),"page-size":g.pageSize,"onUpdate:pageSize":e[5]||(e[5]=t=>g.pageSize=t),"page-sizes":[10,20,50,100],total:_.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:q,onCurrentChange:O},null,8,["current-page","page-size","total"])])):x("",!0)])])}}},it=he(et,[["__scopeId","data-v-d650dcac"]]);export{it as default};
