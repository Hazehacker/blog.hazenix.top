import{r as c,j as N,k as _,l as D,c as o,o as s,b as t,J as f,t as u,e as h,a as A,F as p,n as k,z as B,g as M,M as P}from"./index-Cr_Or7lo.js";import{a as V}from"./category-C19aqy6Z.js";import{_ as j}from"./ArticleCard-BfqdJHxf.js";import{_ as z}from"./LoadingSpinner-BWb2lX26.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"category-detail"},L={class:"container mx-auto px-4 py-8"},T={class:"mb-8"},E={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"},I={class:"text-3xl font-bold text-gray-900 dark:text-white mb-4"},J={key:0,class:"text-gray-600 dark:text-gray-300 text-lg"},R={class:"flex items-center mt-4 text-sm text-gray-500 dark:text-gray-400"},S={class:"mr-4"},q={class:"mr-4"},G={class:"mb-8"},H={key:0,class:"flex justify-center py-8"},K={key:1,class:"space-y-6"},O={key:2,class:"text-center py-12"},Q={key:3,class:"mt-8 flex justify-center"},U={class:"flex items-center space-x-2"},W=["onClick"],X={__name:"CategoryDetail",setup(Y){const d=B(),v=c(!1),n=c(null),l=c([]),i=c(1),g=c(1),y=c(0),b=N(()=>{const e=[],a=Math.max(1,i.value-2),r=Math.min(g.value,a+4);for(let m=a;m<=r;m++)e.push(m);return e}),x=async()=>{if(d.params.id){v.value=!0;try{const e=await V(d.params.id);l.value=e.data||[],y.value=l.value.length,l.value.length>0&&l.value[0].categoryName?n.value={name:l.value[0].categoryName,id:d.params.id}:n.value={name:"分类",id:d.params.id}}catch(e){console.error("获取分类文章失败:",e),l.value=[]}finally{v.value=!1}}},w=e=>{e>=1&&e<=g.value&&e!==i.value&&(i.value=e)},C=e=>e?new Date(e).toLocaleDateString("zh-CN"):"";return _(()=>d.params.id,()=>{i.value=1,x()},{immediate:!0}),_(i,()=>{x()}),D(()=>{x()}),(e,a)=>(s(),o("div",F,[t("div",L,[t("div",T,[t("div",E,[t("h1",I,u(n.value?.name||"加载中..."),1),n.value?.description?(s(),o("p",J,u(n.value.description),1)):f("",!0),t("div",R,[t("span",S,[a[0]||(a[0]=t("i",{class:"fas fa-file-alt mr-1"},null,-1)),h(" "+u(y.value)+" 篇文章 ",1)]),t("span",q,[a[1]||(a[1]=t("i",{class:"fas fa-calendar mr-1"},null,-1)),h(" 创建于 "+u(C(n.value?.createdAt)),1)])])])]),t("div",G,[a[3]||(a[3]=t("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-6"}," 相关文章 ",-1)),v.value?(s(),o("div",H,[A(z)])):l.value.length>0?(s(),o("div",K,[(s(!0),o(p,null,k(l.value,r=>(s(),M(j,{key:r.id,article:r,class:"hover:shadow-lg transition-shadow duration-300"},null,8,["article"]))),128))])):(s(),o("div",O,[...a[2]||(a[2]=[t("div",{class:"text-gray-400 dark:text-gray-500 mb-4"},[t("i",{class:"fas fa-inbox text-6xl"})],-1),t("h3",{class:"text-xl font-medium text-gray-900 dark:text-white mb-2"}," 暂无文章 ",-1),t("p",{class:"text-gray-600 dark:text-gray-400"}," 该分类下还没有任何文章 ",-1)])])),g.value>1?(s(),o("div",Q,[t("nav",U,[(s(!0),o(p,null,k(b.value,r=>(s(),o("button",{key:r,onClick:m=>w(r),class:P(["px-4 py-2 rounded-md text-sm font-medium transition-colors",r===i.value?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},u(r),11,W))),128))])])):f("",!0)])])]))}},rt=$(X,[["__scopeId","data-v-58d475af"]]);export{rt as default};
