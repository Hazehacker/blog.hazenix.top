import{r as c,K as D,w as g,o as N,c as o,f as t,D as f,G as u,q as h,e as A,F as p,E as k,Q as B,b as s,k as P,X as V}from"./index-BjRrW_j8.js";import{a as M}from"./category-Ch8X7rXd.js";import{_ as $}from"./ArticleCard-B651dIwE.js";import{_ as j}from"./LoadingSpinner-RrWrbirh.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"category-detail"},F={class:"container mx-auto px-4 py-8"},L={class:"mb-8"},T={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"},q={class:"text-3xl font-bold text-gray-900 dark:text-white mb-4"},G={key:0,class:"text-gray-600 dark:text-gray-300 text-lg"},I={class:"flex items-center mt-4 text-sm text-gray-500 dark:text-gray-400"},K={class:"mr-4"},Q={class:"mr-4"},R={class:"mb-8"},S={key:0,class:"flex justify-center py-8"},X={key:1,class:"space-y-6"},H={key:2,class:"text-center py-12"},J={key:3,class:"mt-8 flex justify-center"},O={class:"flex items-center space-x-2"},U=["onClick"],W={__name:"CategoryDetail",setup(Y){const d=B(),v=c(!1),n=c(null),l=c([]),i=c(1),x=c(1),_=c(0),b=D(()=>{const e=[],a=Math.max(1,i.value-2),r=Math.min(x.value,a+4);for(let m=a;m<=r;m++)e.push(m);return e}),y=async()=>{if(d.params.id){v.value=!0;try{const e=await M(d.params.id);l.value=e.data||[],_.value=l.value.length,l.value.length>0&&l.value[0].categoryName?n.value={name:l.value[0].categoryName,id:d.params.id}:n.value={name:"分类",id:d.params.id}}catch(e){console.error("获取分类文章失败:",e),l.value=[]}finally{v.value=!1}}},w=e=>{e>=1&&e<=x.value&&e!==i.value&&(i.value=e)},C=e=>e?new Date(e).toLocaleDateString("zh-CN"):"";return g(()=>d.params.id,()=>{i.value=1,y()},{immediate:!0}),g(i,()=>{y()}),N(()=>{y()}),(e,a)=>(s(),o("div",E,[t("div",F,[t("div",L,[t("div",T,[t("h1",q,u(n.value?.name||"加载中..."),1),n.value?.description?(s(),o("p",G,u(n.value.description),1)):f("",!0),t("div",I,[t("span",K,[a[0]||(a[0]=t("i",{class:"fas fa-file-alt mr-1"},null,-1)),h(" "+u(_.value)+" 篇文章 ",1)]),t("span",Q,[a[1]||(a[1]=t("i",{class:"fas fa-calendar mr-1"},null,-1)),h(" 创建于 "+u(C(n.value?.createdAt)),1)])])])]),t("div",R,[a[3]||(a[3]=t("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-6"}," 相关文章 ",-1)),v.value?(s(),o("div",S,[A(j)])):l.value.length>0?(s(),o("div",X,[(s(!0),o(p,null,k(l.value,r=>(s(),P($,{key:r.id,article:r,class:"hover:shadow-lg transition-shadow duration-300"},null,8,["article"]))),128))])):(s(),o("div",H,[...a[2]||(a[2]=[t("div",{class:"text-gray-400 dark:text-gray-500 mb-4"},[t("i",{class:"fas fa-inbox text-6xl"})],-1),t("h3",{class:"text-xl font-medium text-gray-900 dark:text-white mb-2"}," 暂无文章 ",-1),t("p",{class:"text-gray-600 dark:text-gray-400"}," 该分类下还没有任何文章 ",-1)])])),x.value>1?(s(),o("div",J,[t("nav",O,[(s(!0),o(p,null,k(b.value,r=>(s(),o("button",{key:r,onClick:m=>w(r),class:V(["px-4 py-2 rounded-md text-sm font-medium transition-colors",r===i.value?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},u(r),11,U))),128))])])):f("",!0)])])]))}},rt=z(W,[["__scopeId","data-v-58d475af"]]);export{rt as default};
