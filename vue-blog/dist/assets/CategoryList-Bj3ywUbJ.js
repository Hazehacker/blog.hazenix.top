import{r as g,l as _,c as o,o as i,b as u,B as v,I as x,J as C,F as w,n as A,u as b,t as f}from"./index-Cr_Or7lo.js";import{g as k}from"./category-C19aqy6Z.js";import{a as B}from"./article-CsEU7-wh.js";const D={class:"max-w-6xl mx-auto"},I={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},L=["onClick"],M={class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},E={class:"text-sm text-gray-500"},F={key:0,class:"col-span-full text-center py-12 text-gray-500"},R={__name:"CategoryList",setup(N){const y=b(),l=g([]),n=g(!1),p=async a=>{try{const t=await B.getArticleList();if(t&&t.code===200&&t.data){let s=[];Array.isArray(t.data)?s=t.data:t.data.list&&Array.isArray(t.data.list)?s=t.data.list:Array.isArray(t.data.records)?s=t.data.records:s=[];const r=s.filter(e=>!(e.id===1||e.id==="1"||e.status!==0&&e.status!=="0")),c=new Map;return r.forEach(e=>{const d=e.categoryId||e.category?.id;d&&c.set(d,(c.get(d)||0)+1)}),a.map(e=>({...e,articleCount:c.get(e.id)||0})).filter(e=>e.articleCount>0)}return a}catch{return a}},h=async()=>{n.value=!0;try{let t=(await k()).data||[];t=await p(t),l.value=t}catch{l.value=[]}finally{n.value=!1}},m=a=>{y.push(`/articles?category=${a.id}`)};return _(()=>{h()}),(a,t)=>{const s=x("loading");return i(),o("div",D,[t[0]||(t[0]=u("h1",{class:"text-3xl font-bold mb-8"},"文章分类",-1)),v((i(),o("div",I,[(i(!0),o(w,null,A(l.value,r=>(i(),o("div",{key:r.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow duration-300 cursor-pointer",onClick:c=>m(r)},[u("h3",M,f(r.name),1),u("div",E,f(r.articleCount||0)+" 篇文章 ",1)],8,L))),128)),l.value.length===0&&!n.value?(i(),o("div",F," 暂无分类 ")):C("",!0)])),[[s,n.value]])])}}};export{R as default};
