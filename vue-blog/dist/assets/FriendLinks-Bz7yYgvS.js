import{_ as g,r as w,i as z,H as B,j as D,c as p,o as i,b as s,g as q,B as C,a as t,l as f,w as r,h as u,p as M,f as c,a7 as X,F as Y,C as Z,D as E,W as ee,a8 as te,a9 as se,E as $,d as ae,aa as N,ab as re,ac as le,ad as oe,a4 as ne,q as de}from"./index-CxeTFetW.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x="/api",j={getLinks(l={}){return g.get("/user/links",{params:l})},applyLink(l){return g.post("/user/links/apply",l)},getArticles(l={}){return g.get(`${x}/articles`,{params:l})},getArticle(l){return g.get(`${x}/articles/${l}`)},getCategories(l={}){return g.get(`${x}/categories`,{params:l})},getCategory(l){return g.get(`${x}/categories/${l}`)},getTags(l={}){return g.get(`${x}/tags`,{params:l})},getTag(l){return g.get(`${x}/tags/${l}`)},getComments(l={}){return g.get(`${x}/comments`,{params:l})},createComment(l){return g.post(`${x}/comments`,l)},search(l={}){return g.get(`${x}/search`,{params:l})}},ie={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},ue={class:"flex items-center justify-between mb-6"},ce={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},ge={key:0,class:"flex justify-center py-8"},me={key:1,class:"text-center text-gray-500 dark:text-gray-400 py-8"},pe={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},fe=["href"],_e=["src","alt"],ye={class:"flex-1 min-w-0"},ve={class:"font-medium text-gray-900 dark:text-gray-100 group-hover:text-primary truncate"},xe={key:0,class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mt-1"},be={__name:"FriendLinks",setup(l){const _=w(!1),m=w([]),b=z(),k=B(()=>b.userInfo?.isAdmin||!1),y=async()=>{_.value=!0;try{const e=await j.getLinks({status:0});m.value=e.data||[]}catch(e){console.error("加载友链列表失败:",e);const a=[{id:1,name:"Vue.js",description:"渐进式JavaScript框架",url:"https://vuejs.org",avatar:"https://vuejs.org/images/logo.png",status:0},{id:2,name:"Element Plus",description:"基于Vue 3的桌面端组件库",url:"https://element-plus.org",avatar:"https://element-plus.org/images/element-plus-logo-small.svg",status:0}];m.value=a}finally{_.value=!1}},h=e=>{e.target.src="/default-avatar.png"};return D(()=>{y()}),(e,a)=>{const L=c("el-icon"),V=c("el-button");return i(),p("div",ie,[s("div",ue,[s("h3",ce,[t(L,{class:"mr-2"},{default:r(()=>[t(u(M))]),_:1}),a[1]||(a[1]=f(" 友情链接 ",-1))]),k.value?(i(),q(V,{key:0,size:"small",type:"primary",plain:"",onClick:a[0]||(a[0]=d=>e.$router.push("/admin/links"))},{default:r(()=>[...a[2]||(a[2]=[f(" 管理友链 ",-1)])]),_:1})):C("",!0)]),_.value?(i(),p("div",ge,[t(L,{class:"is-loading text-2xl"},{default:r(()=>[t(u(X))]),_:1})])):m.value.length===0?(i(),p("div",me," 暂无友情链接 ")):(i(),p("div",pe,[(i(!0),p(Y,null,Z(m.value,d=>(i(),p("a",{key:d.id,href:d.url,target:"_blank",rel:"noopener noreferrer",class:"group flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"},[d.avatar?(i(),p("img",{key:0,src:d.avatar,alt:d.name,class:"w-12 h-12 rounded-full object-cover mr-4 flex-shrink-0",onError:h},null,40,_e)):C("",!0),s("div",ye,[s("h4",ve,E(d.name),1),d.description?(i(),p("p",xe,E(d.description),1)):C("",!0)])],8,fe))),128))]))])}}},ke=R(be,[["__scopeId","data-v-a92def14"]]),he={class:"flex items-center space-x-4"},$e={key:0,class:"flex-shrink-0"},we={class:"relative"},Ve=["src"],Le={class:"absolute inset-0 w-16 h-16 rounded-lg border border-gray-200 bg-gray-100 flex items-center justify-center text-gray-400",style:{display:"none"}},Se={class:"flex-1"},Ue={class:"mt-2"},Ce={class:"dialog-footer"},Ee="/user/common/upload",je={__name:"LinkApplyDialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","success"],setup(l,{emit:_}){const m=l,b=_,k=B({get:()=>m.modelValue,set:o=>b("update:modelValue",o)}),y=w(),h=w(),e=w(!1),a=ee({name:"",description:"",url:"",avatar:""}),L={name:[{required:!0,message:"请输入网站名称",trigger:"blur"},{min:2,max:48,message:"网站名称长度在 2 到 48 个字符",trigger:"blur"}],description:[{max:255,message:"网站描述不能超过 255 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入网站地址",trigger:"blur"},{pattern:/^https?:\/\/.+/,message:"请输入有效的网站地址，如：https://example.com",trigger:"blur"}],avatar:[{pattern:/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i,message:"请输入有效的图片URL地址",trigger:"blur"}]},V=z(),d=B(()=>{const o=V.token;return o?{Authorization:`Bearer ${o}`}:{}}),T=o=>{const n=o.type.startsWith("image/"),S=o.size/1024/1024<2;return n?S?!0:($.error("图片大小不能超过 2MB!"),!1):($.error("只能上传图片文件!"),!1)},G=o=>{o.code===200?(a.avatar=o.data.url,$.success("图片上传成功")):$.error(o.msg||"图片上传失败")},P=o=>{console.error("上传失败:",o),$.error("图片上传失败，请重试")},H=o=>{o.target.style.display="none",o.target.nextElementSibling&&(o.target.nextElementSibling.style.display="block")},J=()=>{a.name="",a.description="",a.url="",a.avatar="",y.value&&y.value.resetFields()},A=()=>{J(),k.value=!1},W=async()=>{if(y.value)try{await y.value.validate(),e.value=!0;const o=await j.applyLink({name:a.name,description:a.description,url:a.url,avatar:a.avatar,status:1});o.code===200?($.success("友链申请提交成功，请等待审核"),b("success"),A()):$.error(o.msg||"申请提交失败")}catch(o){console.error("提交申请失败:",o),$.error("申请提交失败，请重试")}finally{e.value=!1}};return(o,n)=>{const S=c("el-input"),U=c("el-form-item"),I=c("el-icon"),F=c("el-button"),O=c("el-upload"),K=c("el-form"),Q=c("el-dialog");return i(),q(Q,{modelValue:k.value,"onUpdate:modelValue":n[4]||(n[4]=v=>k.value=v),title:"申请友链",width:"600px","before-close":A,"destroy-on-close":""},{footer:r(()=>[s("div",Ce,[t(F,{onClick:A},{default:r(()=>[...n[7]||(n[7]=[f("取消",-1)])]),_:1}),t(F,{type:"primary",loading:e.value,onClick:W},{default:r(()=>[...n[8]||(n[8]=[f(" 提交申请 ",-1)])]),_:1},8,["loading"])])]),default:r(()=>[t(K,{ref_key:"formRef",ref:y,model:a,rules:L,"label-width":"100px","label-position":"left"},{default:r(()=>[t(U,{label:"网站名称",prop:"name"},{default:r(()=>[t(S,{modelValue:a.name,"onUpdate:modelValue":n[0]||(n[0]=v=>a.name=v),placeholder:"请输入网站名称",maxlength:"48","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(U,{label:"网站描述",prop:"description"},{default:r(()=>[t(S,{modelValue:a.description,"onUpdate:modelValue":n[1]||(n[1]=v=>a.description=v),type:"textarea",rows:3,placeholder:"请输入网站描述",maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(U,{label:"网站地址",prop:"url"},{default:r(()=>[t(S,{modelValue:a.url,"onUpdate:modelValue":n[2]||(n[2]=v=>a.url=v),placeholder:"请输入网站地址，如：https://example.com"},null,8,["modelValue"])]),_:1}),t(U,{label:"网站图标",prop:"avatar"},{default:r(()=>[s("div",he,[a.avatar?(i(),p("div",$e,[s("div",we,[s("img",{src:a.avatar,alt:"网站图标",class:"w-16 h-16 rounded-lg object-cover border border-gray-200",onError:H},null,40,Ve),s("div",Le,[t(I,{size:"24"},{default:r(()=>[t(u(te))]),_:1})])])])):C("",!0),s("div",Se,[t(O,{ref_key:"uploadRef",ref:h,action:Ee,headers:d.value,"show-file-list":!1,"before-upload":T,"on-success":G,"on-error":P,accept:"image/*",class:"upload-demo"},{default:r(()=>[t(F,{type:"primary",plain:""},{default:r(()=>[t(I,{class:"mr-1"},{default:r(()=>[t(u(se))]),_:1}),n[5]||(n[5]=f(" 上传图标 ",-1))]),_:1})]),_:1},8,["headers"]),s("div",Ue,[t(S,{modelValue:a.avatar,"onUpdate:modelValue":n[3]||(n[3]=v=>a.avatar=v),placeholder:"或直接输入图标URL地址",size:"small"},null,8,["modelValue"])])])]),n[6]||(n[6]=s("div",{class:"text-xs text-gray-500 mt-1",style:{"margin-bottom":"42px"}}," 支持 JPG、PNG、GIF 格式，建议尺寸 64x64 像素 ",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},Ae=R(je,[["__scopeId","data-v-e4cd76bf"]]),Fe={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},Be={class:"bg-white dark:bg-gray-800 shadow-sm"},Re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ie={class:"text-center"},Ne={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4"},ze={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},De={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},qe={class:"lg:col-span-2"},Me={class:"space-y-6"},Te={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},Ge={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},Pe={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},He={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},Je={class:"grid grid-cols-2 gap-4"},We={class:"text-center"},Oe={class:"text-2xl font-bold text-primary"},Ke={class:"text-center"},Qe={class:"text-2xl font-bold text-green-500"},Xe={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},Ye={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},Ze={class:"space-y-2"},et={__name:"FriendLinks",setup(l){const _=w(0),m=w(0),b=w(!1),k=async()=>{try{const h=await j.getLinks({status:0});m.value=h.data?.length||0;const e=await j.getLinks();_.value=e.data?.length||0}catch(h){console.error("加载友链统计失败:",h),_.value=12,m.value=10}},y=()=>{k()};return D(()=>{k()}),(h,e)=>{const a=c("el-icon"),L=c("el-button"),V=c("router-link");return i(),p("div",Fe,[s("div",Be,[s("div",Re,[s("div",Ie,[s("h1",Ne,[t(a,{class:"mr-3 text-primary"},{default:r(()=>[t(u(M))]),_:1}),e[2]||(e[2]=f(" 友情链接 ",-1))]),e[3]||(e[3]=s("p",{class:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto"}," 这里是我的友链，希望能为您提供更多有价值的内容 ",-1))])])]),s("div",ze,[s("div",De,[s("div",qe,[t(ke)]),s("div",Me,[s("div",Te,[s("h3",Ge,[t(a,{class:"mr-2"},{default:r(()=>[t(u(N))]),_:1}),e[4]||(e[4]=f(" 申请友链 ",-1))]),e[6]||(e[6]=s("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," 如果您希望与本站建立友情链接，请填写以下信息： ",-1)),t(L,{type:"primary",size:"large",class:"w-full mb-4",onClick:e[0]||(e[0]=d=>b.value=!0)},{default:r(()=>[t(a,{class:"mr-2"},{default:r(()=>[t(u(N))]),_:1}),e[5]||(e[5]=f(" 立即申请友链 ",-1))]),_:1}),e[7]||(e[7]=ae('<div class="mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg" data-v-6e9f755f><h4 class="font-medium text-blue-900 dark:text-blue-100 mb-2" data-v-6e9f755f>申请要求：</h4><ul class="text-sm text-blue-800 dark:text-blue-200 space-y-1" data-v-6e9f755f><li data-v-6e9f755f>• 网站内容健康向上</li><li data-v-6e9f755f>• 网站正常运行</li><li data-v-6e9f755f>• 愿意互加友链</li><li data-v-6e9f755f>• 提供网站名称、描述和头像</li></ul></div><div class="mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg" data-v-6e9f755f><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-2" data-v-6e9f755f>其他联系方式：</h4><div class="space-y-1 text-sm text-gray-600 dark:text-gray-400" data-v-6e9f755f><p data-v-6e9f755f><strong data-v-6e9f755f>邮箱：</strong> nolramqetyu575@gmail.com</p></div></div>',2))]),s("div",Pe,[s("h3",He,[t(a,{class:"mr-2"},{default:r(()=>[t(u(re))]),_:1}),e[8]||(e[8]=f(" 友链统计 ",-1))]),s("div",Je,[s("div",We,[s("div",Oe,E(_.value),1),e[9]||(e[9]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"友链总数",-1))]),s("div",Ke,[s("div",Qe,E(m.value),1),e[10]||(e[10]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"活跃友链",-1))])])]),s("div",Xe,[s("h3",Ye,[t(a,{class:"mr-2"},{default:r(()=>[t(u(le))]),_:1}),e[11]||(e[11]=f(" 快速导航 ",-1))]),s("div",Ze,[t(V,{to:"/home",class:"flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:r(()=>[t(a,{class:"mr-2 text-primary"},{default:r(()=>[t(u(oe))]),_:1}),e[12]||(e[12]=s("span",{class:"text-gray-700 dark:text-gray-300"},"返回首页",-1))]),_:1}),t(V,{to:"/articles",class:"flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:r(()=>[t(a,{class:"mr-2 text-primary"},{default:r(()=>[t(u(ne))]),_:1}),e[13]||(e[13]=s("span",{class:"text-gray-700 dark:text-gray-300"},"浏览文章",-1))]),_:1}),t(V,{to:"/about",class:"flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:r(()=>[t(a,{class:"mr-2 text-primary"},{default:r(()=>[t(u(de))]),_:1}),e[14]||(e[14]=s("span",{class:"text-gray-700 dark:text-gray-300"},"关于我们",-1))]),_:1})])])])])]),t(Ae,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=d=>b.value=d),onSuccess:y},null,8,["modelValue"])])}}},at=R(et,[["__scopeId","data-v-6e9f755f"]]);export{at as default};
