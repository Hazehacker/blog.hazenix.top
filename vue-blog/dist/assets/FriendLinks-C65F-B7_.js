import{a2 as M,r as h,i as N,j as R,l as P,c as y,o as m,b as e,g as J,J as S,a as s,e as f,w as r,h as i,q as Q,d as p,a3 as Y,F as Z,n as ee,t as A,X as te,a4 as se,a5 as ae,a6 as re,K as L,V as le,a7 as D,a8 as oe,a9 as ne,aa as de,ab as ie,v as ue}from"./index-cinz6B6s.js";import{b as ge}from"./helpers-YoB15h0M.js";import{a as q}from"./avatar-Br5af8Id.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={getLinks(_={}){return M.get("/user/links",{params:_})},applyLink(_){return M.post("/user/links/apply",_)},getUpdates(_={}){return M.get("/user/updates",{params:_})}},me={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},pe={class:"flex items-center justify-between mb-6"},ce={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},fe={key:0,class:"flex justify-center py-8"},xe={key:1,class:"text-center text-gray-500 dark:text-gray-400 py-8"},ye={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},_e=["href"],ve=["src","alt"],be={class:"flex-1 min-w-0"},ke={class:"font-medium text-gray-900 dark:text-gray-100 group-hover:text-primary truncate"},he={key:0,class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mt-1"},we={__name:"FriendLinks",setup(_){const v=h(!1),x=h([]),w=N(),c=R(()=>w.userInfo?.isAdmin||!1),b=async()=>{v.value=!0;try{const a=await F.getLinks({status:0});x.value=a.data||[]}catch{const n=[{id:1,name:"Vue.js",description:"渐进式JavaScript框架",url:"https://vuejs.org",avatar:"https://vuejs.org/images/logo.png",status:0},{id:2,name:"Element Plus",description:"基于Vue 3的桌面端组件库",url:"https://element-plus.org",avatar:"https://element-plus.org/images/element-plus-logo-small.svg",status:0}];x.value=n}finally{v.value=!1}},C=a=>ge(a,q),$=a=>{a.target.src=q};return P(()=>{b()}),(a,n)=>{const t=p("el-icon"),u=p("el-button");return m(),y("div",me,[e("div",pe,[e("h3",ce,[s(t,{class:"mr-2"},{default:r(()=>[s(i(Q))]),_:1}),n[1]||(n[1]=f(" 友情链接 ",-1))]),c.value?(m(),J(u,{key:0,size:"small",type:"primary",plain:"",onClick:n[0]||(n[0]=g=>a.$router.push("/admin/links"))},{default:r(()=>[...n[2]||(n[2]=[f(" 管理友链 ",-1)])]),_:1})):S("",!0)]),v.value?(m(),y("div",fe,[s(t,{class:"is-loading text-2xl"},{default:r(()=>[s(i(Y))]),_:1})])):x.value.length===0?(m(),y("div",xe," 暂无友情链接 ")):(m(),y("div",ye,[(m(!0),y(Z,null,ee(x.value,g=>(m(),y("a",{key:g.id,href:g.url,target:"_blank",rel:"noopener noreferrer",class:"group flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"},[e("img",{src:C(g.avatar),alt:g.name,class:"w-12 h-12 rounded-full object-cover mr-4 flex-shrink-0 border border-gray-200 dark:border-gray-600",onError:$},null,40,ve),e("div",be,[e("h4",ke,A(g.name),1),g.description?(m(),y("p",he,A(g.description),1)):S("",!0)])],8,_e))),128))]))])}}},$e=B(we,[["__scopeId","data-v-10ef6a99"]]),Ve={class:"flex items-center space-x-4"},Le={key:0,class:"flex-shrink-0"},Ue={class:"relative"},Ce=["src"],je={class:"absolute inset-0 w-16 h-16 rounded-lg border border-gray-200 bg-gray-100 flex items-center justify-center text-gray-400",style:{display:"none"}},Ee={class:"flex-1"},Re={class:"mt-2"},Se={class:"dialog-footer"},Ae={__name:"LinkApplyDialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","success"],setup(_,{emit:v}){const x=_,w=v,c=R({get:()=>x.modelValue,set:o=>w("update:modelValue",o)}),b=h(),C=h(),$=h(!1),a=te({name:"",description:"",url:"",avatar:""}),n={name:[{required:!0,message:"请输入网站名称",trigger:"blur"},{min:2,max:48,message:"网站名称长度在 2 到 48 个字符",trigger:"blur"}],description:[{max:255,message:"网站描述不能超过 255 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入网站地址",trigger:"blur"},{pattern:/^https?:\/\/.+/,message:"请输入有效的网站地址，如：https://example.com",trigger:"blur"}],avatar:[{validator:(o,l,d)=>{if(!l||l.trim()===""){d();return}const U=/^https?:\/\/.+/,E=/\.(jpg|jpeg|png|gif|webp)$/i;U.test(l)?E.test(l)?d():d(new Error("请输入有效的图片URL地址（支持 jpg、jpeg、png、gif、webp 格式）")):d(new Error("请输入有效的URL地址，如：https://example.com/logo.png"))},trigger:"blur"}]},t=N(),u=R(()=>se("/common/upload")),g=R(()=>{const o=t.token;return o?{Authorization:`Bearer ${o}`}:{}}),j=o=>{const l=o.type.startsWith("image/"),d=o.size/1024/1024<2;return l?d?!0:(L.error("图片大小不能超过 2MB!"),!1):(L.error("只能上传图片文件!"),!1)},V=o=>{o.code===200?(a.avatar=o.data.url,L.success("图片上传成功")):L.error(o.msg||"图片上传失败")},G=o=>{L.error("图片上传失败，请重试")},H=o=>{o.target.style.display="none",o.target.nextElementSibling&&(o.target.nextElementSibling.style.display="block")},T=()=>{a.name="",a.description="",a.url="",a.avatar="",b.value&&b.value.resetFields()},z=()=>{T(),c.value=!1},W=async()=>{if(b.value)try{await b.value.validate(),$.value=!0;const o=a.avatar?String(a.avatar).trim():"",l={name:a.name,description:a.description||"",url:a.url,avatar:o,status:1},d=await F.applyLink(l);d.code===200?(L.success("友链申请提交成功，请等待审核"),w("success"),z()):L.error(d.msg||"申请提交失败")}catch{L.error("申请提交失败，请重试")}finally{$.value=!1}};return(o,l)=>{const d=p("el-input"),U=p("el-form-item"),E=p("el-icon"),I=p("el-button"),X=p("el-upload"),K=p("el-form"),O=p("el-dialog");return m(),J(O,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=k=>c.value=k),title:"申请友链",width:"600px","before-close":z,"destroy-on-close":""},{footer:r(()=>[e("div",Se,[s(I,{onClick:z},{default:r(()=>[...l[7]||(l[7]=[f("取消",-1)])]),_:1}),s(I,{type:"primary",loading:$.value,onClick:W},{default:r(()=>[...l[8]||(l[8]=[f(" 提交申请 ",-1)])]),_:1},8,["loading"])])]),default:r(()=>[s(K,{ref_key:"formRef",ref:b,model:a,rules:n,"label-width":"100px","label-position":"left"},{default:r(()=>[s(U,{label:"网站名称",prop:"name"},{default:r(()=>[s(d,{modelValue:a.name,"onUpdate:modelValue":l[0]||(l[0]=k=>a.name=k),placeholder:"请输入网站名称",maxlength:"48","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(U,{label:"网站描述",prop:"description"},{default:r(()=>[s(d,{modelValue:a.description,"onUpdate:modelValue":l[1]||(l[1]=k=>a.description=k),type:"textarea",rows:3,placeholder:"请输入网站描述",maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(U,{label:"网站地址",prop:"url"},{default:r(()=>[s(d,{modelValue:a.url,"onUpdate:modelValue":l[2]||(l[2]=k=>a.url=k),placeholder:"请输入网站地址，如：https://example.com"},null,8,["modelValue"])]),_:1}),s(U,{label:"网站图标",prop:"avatar"},{default:r(()=>[e("div",Ve,[a.avatar?(m(),y("div",Le,[e("div",Ue,[e("img",{src:a.avatar,alt:"网站图标",class:"w-16 h-16 rounded-lg object-cover border border-gray-200",onError:H},null,40,Ce),e("div",je,[s(E,{size:"24"},{default:r(()=>[s(i(ae))]),_:1})])])])):S("",!0),e("div",Ee,[s(X,{ref_key:"uploadRef",ref:C,action:u.value,headers:g.value,"show-file-list":!1,"before-upload":j,"on-success":V,"on-error":G,accept:"image/*",class:"upload-demo"},{default:r(()=>[s(I,{type:"primary",plain:""},{default:r(()=>[s(E,{class:"mr-1"},{default:r(()=>[s(i(re))]),_:1}),l[5]||(l[5]=f(" 上传图标 ",-1))]),_:1})]),_:1},8,["action","headers"]),e("div",Re,[s(d,{modelValue:a.avatar,"onUpdate:modelValue":l[3]||(l[3]=k=>a.avatar=k),placeholder:"或直接输入图标URL地址",size:"small"},null,8,["modelValue"])])])]),l[6]||(l[6]=e("div",{class:"text-xs text-gray-500 mt-1",style:{"margin-bottom":"42px"}}," 支持 JPG、PNG、GIF 格式，建议尺寸 64x64 像素 ",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},Fe=B(Ae,[["__scopeId","data-v-c312da38"]]),ze="/assets/Hazenix-CDJcA7Rl.png",Ie={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},Me={class:"bg-white dark:bg-gray-800 shadow-sm"},Be={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},De={class:"text-center"},qe={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4"},Ne={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pe={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Je={class:"lg:col-span-2"},Qe={class:"space-y-6"},Ge={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},He={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},Te={class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},We={class:"space-y-1 text-sm text-gray-600 dark:text-gray-400"},Xe={class:"relative inline-block"},Ke={class:"text-center"},Oe=["src"],Ye={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},Ze={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},et={class:"grid grid-cols-2 gap-4"},tt={class:"text-center"},st={class:"text-2xl font-bold text-primary"},at={class:"text-center"},rt={class:"text-2xl font-bold text-green-500"},lt={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},ot={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},nt={class:"space-y-2"},dt={__name:"FriendLinks",setup(_){const v=h(0),x=h(0),w=h(!1),c=h(!1),b=ze,C=n=>{console.warn("微信二维码图片加载失败，请检查图片路径"),n.target.style.display="none"},$=async()=>{try{const n=await F.getLinks({status:0});x.value=n.data?.length||0;const t=await F.getLinks();v.value=t.data?.length||0}catch{v.value=12,x.value=10}},a=()=>{$()};return P(()=>{$()}),(n,t)=>{const u=p("el-icon"),g=p("el-button"),j=p("router-link");return m(),y("div",Ie,[e("div",Me,[e("div",Be,[e("div",De,[e("h1",qe,[s(u,{class:"mr-3 text-primary"},{default:r(()=>[s(i(Q))]),_:1}),t[6]||(t[6]=f(" 友情链接 ",-1))]),t[7]||(t[7]=e("p",{class:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto"}," 这里是我的友链，希望能为您提供更多有价值的内容 ",-1))])])]),e("div",Ne,[e("div",Pe,[e("div",Je,[s($e)]),e("div",Qe,[e("div",Ge,[e("h3",He,[s(u,{class:"mr-2"},{default:r(()=>[s(i(D))]),_:1}),t[8]||(t[8]=f(" 申请友链 ",-1))]),t[16]||(t[16]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," 如果您希望与本站建立友情链接，请填写以下信息： ",-1)),s(g,{type:"primary",size:"large",class:"w-full mb-4",onClick:t[0]||(t[0]=V=>w.value=!0)},{default:r(()=>[s(u,{class:"mr-2"},{default:r(()=>[s(i(D))]),_:1}),t[9]||(t[9]=f(" 立即申请友链 ",-1))]),_:1}),t[17]||(t[17]=e("div",{class:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},[e("h4",{class:"font-medium text-blue-900 dark:text-blue-100 mb-2"},"申请要求："),e("ul",{class:"text-sm text-blue-800 dark:text-blue-200 space-y-1"},[e("li",null,"• 网站内容健康向上"),e("li",null,"• 网站正常运行"),e("li",null,"• 愿意互加友链"),e("li",null,"• 提供网站名称、描述和头像")])],-1)),e("div",Te,[t[15]||(t[15]=e("h4",{class:"font-medium text-gray-900 dark:text-gray-100 mb-2"},"其他联系方式：",-1)),e("div",We,[t[14]||(t[14]=e("p",null,[e("strong",null,"邮箱："),f(" L3542495583@outlook.com")],-1)),e("p",Xe,[t[13]||(t[13]=e("strong",null," 微信： ",-1)),e("span",{class:"text-blue-600 dark:text-blue-400 cursor-pointer hover:underline",onMouseenter:t[1]||(t[1]=V=>c.value=!0),onMouseleave:t[2]||(t[2]=V=>c.value=!1)}," 扫码添加 ",32),s(le,{name:"fade"},{default:r(()=>[c.value?(m(),y("div",{key:0,class:"absolute left-0 top-full mt-2 z-50 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 border border-gray-200 dark:border-gray-700",style:{"min-width":"220px",transform:"translateX(-50%)",left:"50%"},onMouseenter:t[3]||(t[3]=V=>c.value=!0),onMouseleave:t[4]||(t[4]=V=>c.value=!1)},[e("div",Ke,[e("img",{src:i(b),alt:"微信二维码",class:"w-48 h-48 mx-auto mb-2 rounded object-contain",onError:C},null,40,Oe),t[10]||(t[10]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-1"}," 在本站扫码加我的，请加上 ",-1)),t[11]||(t[11]=e("p",{class:"text-xs font-semibold text-blue-600 dark:text-blue-400 mb-1"},' "[blog.hazenix.top]" ',-1)),t[12]||(t[12]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"}," 前缀，感谢配合 ",-1))])],32)):S("",!0)]),_:1})])])])]),e("div",Ye,[e("h3",Ze,[s(u,{class:"mr-2"},{default:r(()=>[s(i(oe))]),_:1}),t[18]||(t[18]=f(" 友链统计 ",-1))]),e("div",et,[e("div",tt,[e("div",st,A(v.value),1),t[19]||(t[19]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"友链总数",-1))]),e("div",at,[e("div",rt,A(x.value),1),t[20]||(t[20]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"活跃友链",-1))])])]),e("div",lt,[e("h3",ot,[s(u,{class:"mr-2"},{default:r(()=>[s(i(ne))]),_:1}),t[21]||(t[21]=f(" 快速导航 ",-1))]),e("div",nt,[s(j,{to:"/home",class:"flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:r(()=>[s(u,{class:"mr-2 text-primary"},{default:r(()=>[s(i(de))]),_:1}),t[22]||(t[22]=e("span",{class:"text-gray-700 dark:text-gray-300"},"返回首页",-1))]),_:1}),s(j,{to:"/articles",class:"flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:r(()=>[s(u,{class:"mr-2 text-primary"},{default:r(()=>[s(i(ie))]),_:1}),t[23]||(t[23]=e("span",{class:"text-gray-700 dark:text-gray-300"},"浏览文章",-1))]),_:1}),s(j,{to:"/about",class:"flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:r(()=>[s(u,{class:"mr-2 text-primary"},{default:r(()=>[s(i(ue))]),_:1}),t[24]||(t[24]=e("span",{class:"text-gray-700 dark:text-gray-300"},"关于我",-1))]),_:1})])])])])]),s(Fe,{modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=V=>w.value=V),onSuccess:a},null,8,["modelValue"])])}}},pt=B(dt,[["__scopeId","data-v-bb308b59"]]);export{pt as default};
