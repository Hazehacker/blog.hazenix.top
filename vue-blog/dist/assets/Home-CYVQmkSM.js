import{c as m,o as d,B as C,F as E,C as I,u as T,g as P,i as M,H as F,b as e,h as f,D as g,a as o,l as b,w as x,f as S,p as W,M as X,r as y,j as H,y as J,A as K,E as k,N as O,O as Q,P as Y,Q as Z,e as j,k as q,T as ee,R as te,S as se,U as B,K as oe,s as ae,x as le}from"./index-1BlqOf3s.js";import{a as ie,g as ne}from"./article-DWQUBvz8.js";import{_ as re}from"./ArticleCard-DEnmNyyy.js";import{a as ce}from"./avatar-Br5af8Id.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const de={class:"space-y-6"},ue={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},me={__name:"ArticleList",props:{articles:{type:Array,default:()=>[]}},setup(w){const p=T(),u=n=>{p.push(`/article/${n.id}`)};return(n,r)=>(d(),m("div",de,[(d(!0),m(E,null,I(w.articles,a=>(d(),P(re,{key:a.id,article:a,onClick:u},null,8,["article"]))),128)),w.articles.length===0?(d(),m("div",ue," 暂无文章 ")):C("",!0)]))}},pe={class:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg"},ve={class:"text-center"},_e=["src"],he={class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},ge={class:"text-gray-600 dark:text-gray-400 mb-4"},fe={class:"flex justify-center space-x-4 mb-4"},xe={class:"text-center"},ye={class:"text-2xl font-bold text-primary"},we={class:"text-center"},be={class:"text-2xl font-bold text-primary"},ke={class:"text-center"},Ce={class:"text-2xl font-bold text-primary"},$e={class:"space-y-2"},ze=["href"],Se=["href"],Ae={__name:"UserCard",setup(w){const p=M(),n=ce,r=F(()=>p.userInfo||{username:"Hazenix",bio:"心有所向，何惧山海",articleCount:12,viewCount:1280,commentCount:56,github:"https://github.com/HazeHacker",email:"3542495583@qq.com"});return(a,t)=>{const v=S("el-icon");return d(),m("div",pe,[e("div",ve,[e("img",{src:f(n),alt:"User avatar",class:"w-20 h-20 rounded-full mx-auto mb-4"},null,8,_e),e("h3",he,g(r.value?.username||"Hazenix"),1),e("p",ge,g(r.value?.bio||"心有所向，何惧山海"),1),e("div",fe,[e("div",xe,[e("div",ye,g(r.value?.articleCount||0),1),t[0]||(t[0]=e("div",{class:"text-sm text-gray-500"},"文章",-1))]),e("div",we,[e("div",be,g(r.value?.viewCount||0),1),t[1]||(t[1]=e("div",{class:"text-sm text-gray-500"},"浏览",-1))]),e("div",ke,[e("div",Ce,g(r.value?.commentCount||0),1),t[2]||(t[2]=e("div",{class:"text-sm text-gray-500"},"评论",-1))])]),e("div",$e,[r.value?.github?(d(),m("a",{key:0,href:r.value.github,target:"_blank",class:"block text-sm text-gray-600 dark:text-gray-400 hover:text-primary"},[o(v,{class:"mr-1"},{default:x(()=>[o(f(W))]),_:1}),t[3]||(t[3]=b(" GitHub ",-1))],8,ze)):C("",!0),r.value?.email?(d(),m("a",{key:1,href:`mailto:${r.value.email}`,class:"block text-sm text-gray-600 dark:text-gray-400 hover:text-primary"},[o(v,{class:"mr-1"},{default:x(()=>[o(f(X))]),_:1}),t[4]||(t[4]=b(" 联系我 ",-1))],8,Se)):C("",!0)])])])}}},Te={class:"popular-articles"},He={class:"section-header"},Ve={class:"section-title"},Le={class:"articles-list"},Ge=["onClick"],qe={class:"article-rank"},Be={class:"article-content"},Ee={class:"article-title"},Ie={class:"article-meta"},Pe={class:"meta-item"},Me={class:"meta-item"},je={class:"meta-item"},De={key:0,class:"empty-state"},Ne={__name:"PopularArticles",setup(w){const p=T(),u=y(!1),n=y([]),r=async()=>{u.value=!0;try{const t=await ie({limit:10,timeRange:"week"});console.log("Popular articles response:",t),t&&t.data?Array.isArray(t.data)?n.value=t.data:t.data.records?n.value=t.data.records:t.data.list?n.value=t.data.list:n.value=t.data:n.value=[]}catch(t){console.error("加载热门文章失败:",t),k.error("加载热门文章失败"),n.value=[{id:1,title:"Vue3博客系统开发指南",viewCount:100,likeCount:15,commentCount:8},{id:2,title:"Element Plus组件库使用技巧",viewCount:85,likeCount:12,commentCount:6},{id:3,title:"现代前端开发最佳实践",viewCount:75,likeCount:10,commentCount:5}]}finally{u.value=!1}},a=t=>{p.push(`/article/${t}`)};return H(()=>{r()}),(t,v)=>{const h=S("el-icon"),l=S("el-empty"),s=K("loading");return d(),m("div",Te,[e("div",He,[e("h3",Ve,[o(h,{class:"mr-2"},{default:x(()=>[o(f(O))]),_:1}),v[0]||(v[0]=b(" 热门文章 ",-1))])]),J((d(),m("div",Le,[(d(!0),m(E,null,I(n.value,(c,i)=>(d(),m("div",{key:c.id,class:"article-item",onClick:_=>a(c.id)},[e("div",qe,g(i+1),1),e("div",Be,[e("h4",Ee,g(c.title),1),e("div",Ie,[e("span",Pe,[o(h,null,{default:x(()=>[o(f(Q))]),_:1}),b(" "+g(c.viewCount||0),1)]),e("span",Me,[o(h,null,{default:x(()=>[o(f(Y))]),_:1}),b(" "+g(c.likeCount||0),1)]),e("span",je,[o(h,null,{default:x(()=>[o(f(Z))]),_:1}),b(" "+g(c.commentCount||0),1)])])])],8,Ge))),128))])),[[s,u.value]]),!u.value&&n.value.length===0?(d(),m("div",De,[o(l,{description:"暂无热门文章","image-size":80})])):C("",!0)])}}},Re=D(Ne,[["__scopeId","data-v-2c267a53"]]),Ue={class:"theme-guide-content"},Fe={class:"flex items-center gap-2 mb-2"},We={__name:"ThemeGuide",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(w,{emit:p}){const u=w,n=p,r=j(),a=y(u.modelValue),t=y(null),v=y({}),h=y({}),l=async()=>{await se();const c=document.querySelector("header");if(!c)return;let i=c.querySelector(".theme-toggle-button");if(!i){const _=c.querySelectorAll(".el-button");_.length>0&&(i=_[_.length-1])}if(i){const _=i.getBoundingClientRect(),N=260,V=120,$=40;let z=_.top-V-$-10;const A=Math.max(8,window.innerWidth-_.right-8);z<8&&(z=8);const R=_.left+_.width/2,U=window.innerWidth-A-N,L=R-U-$/2+17,G=6;v.value={top:`${z}px`,right:`${A}px`,zIndex:1e4},h.value={position:"absolute",top:`${G}px`,left:`${L}px`,width:`${$}px`,height:`${$}px`,zIndex:9999},console.log("Theme guide position:",{tooltipTop:z,tooltipRight:A,arrowTop:G,arrowLeft:L,tooltipHeight:V})}else v.value={top:"70px",right:"16px",zIndex:1e4},h.value={position:"absolute",top:"135px",left:"50%",transform:"translateX(-50%)",width:"40px",height:"40px",zIndex:9999}};q(()=>u.modelValue,async c=>{a.value=c,c?(await l(),window.addEventListener("resize",l),window.addEventListener("scroll",l,!0)):(window.removeEventListener("resize",l),window.removeEventListener("scroll",l,!0))}),q(()=>r.isDark,c=>{!c&&a.value&&s()});const s=()=>{a.value=!1,n("update:modelValue",!1),window.removeEventListener("resize",l),window.removeEventListener("scroll",l,!0)};return H(()=>{a.value&&l()}),(c,i)=>{const _=S("el-icon");return d(),P(te,{to:"body"},[o(ee,{name:"fade"},{default:x(()=>[a.value?(d(),m("div",{key:0,class:"fixed inset-0 z-[9999]",onClick:s,style:{"pointer-events":"auto"}},[i[5]||(i[5]=e("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm"},null,-1)),e("div",{ref_key:"guideContainer",ref:t,class:"absolute",style:B([v.value,{"pointer-events":"none"}])},[e("div",{class:"relative flex items-center justify-center",style:B([h.value,{"pointer-events":"none"}])},[...i[1]||(i[1]=[e("div",{class:"absolute w-full h-full rounded-full bg-yellow-500/20 animate-ping"},null,-1),e("div",{class:"absolute animate-bounce-horizontal"},[e("svg",{class:"w-8 h-8 text-yellow-500 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M13 7l5 5m0 0l-5 5m5-5H6"})])],-1)])],4),e("div",{class:"theme-guide-tooltip",onClick:i[0]||(i[0]=oe(()=>{},["stop"])),style:{"pointer-events":"auto","margin-top":"47px"}},[e("button",{onClick:s,class:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center rounded-full transition-colors theme-guide-close-btn","aria-label":"关闭引导"},[...i[2]||(i[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",Ue,[e("div",Fe,[o(_,{class:"text-yellow-500 text-lg"},{default:x(()=>[o(f(ae))]),_:1}),i[3]||(i[3]=e("span",{class:"theme-guide-title"}," 切换主题 ",-1))]),i[4]||(i[4]=e("p",{class:"theme-guide-text"}," 点击右上角的主题按钮可以切换到白色模式 ",-1))])])],4)])):C("",!0)]),_:1})])}}},Xe=D(We,[["__scopeId","data-v-7ab78819"]]),Je={class:"py-16 md:py-24"},Ke={class:"flex flex-col md:flex-row justify-between items-start gap-12"},Oe={class:"w-full md:w-1/3 mt-12 md:mt-0"},Qe={class:"mt-24 grid grid-cols-1 lg:grid-cols-3 gap-8"},Ye={class:"lg:col-span-2"},Ze={class:"lg:col-span-1"},et={class:"space-y-8"},nt={__name:"Home",setup(w){const p=le(),u=T(),n=M(),r=j(),a=y([]),t=y(!1),v=async()=>{const l=p.query.code;if(l)try{await n.googleLogin(l),k.success("Google登录成功"),u.replace({path:"/home",query:{}})}catch(s){k.error("Google登录失败: "+(s.message||"未知错误")),console.error("Google login callback error:",s)}},h=async()=>{const l=p.query.code;if(l)try{await n.githubLogin(l),k.success("GitHub登录成功"),u.replace({path:"/home",query:{}})}catch(s){k.error("GitHub登录失败: "+(s.message||"未知错误")),console.error("GitHub login callback error:",s)}};return H(async()=>{const l=p.query.fromIndex==="true";await v(),await h(),l&&(r.isDark||r.toggleTheme(),u.replace({path:"/home",query:{}}),setTimeout(()=>{r.isDark&&(t.value=!0)},1e3));try{const s=await ne({status:"0",page:1,pageSize:6});console.log("Home page articles response:",s),s&&s.data?Array.isArray(s.data)?a.value=s.data:s.data.records?a.value=s.data.records:s.data.list?a.value=s.data.list:a.value=s.data:a.value=[]}catch(s){console.error("Failed to load articles:",s),a.value=[{id:1,title:"Vue3博客系统开发指南",summary:"本文介绍了如何使用Vue3、Element Plus和Tailwind CSS构建一个现代化的博客系统...",author:"Hazenix",createTime:"2025-01-01",viewCount:100,tags:[{id:1,name:"Vue3"},{id:2,name:"前端"}]},{id:2,title:"现代前端开发最佳实践",summary:"探索现代前端开发中的最佳实践，包括组件设计、状态管理、性能优化等方面...",author:"Hazenix",createTime:"2025-01-02",viewCount:85,tags:[{id:3,name:"JavaScript"},{id:4,name:"最佳实践"}]}]}}),(l,s)=>(d(),m("div",Je,[o(Xe,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=c=>t.value=c)},null,8,["modelValue"]),e("div",Ke,[s[1]||(s[1]=e("div",{class:"md:w-2/3"},[e("h1",{class:"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white"}," Hazenix's Blog "),e("p",{class:"mt-4 text-2xl md:text-3xl text-primary font-semibold"}," Nothing but enthusiasm brightens up the endless years. "),e("p",{class:"mt-6 text-lg text-gray-500 dark:text-gray-400"}," 道阻且长，行则将至 ")],-1)),e("div",Oe,[o(Ae)])]),e("div",Qe,[e("div",Ye,[s[2]||(s[2]=e("h2",{class:"text-3xl font-bold mb-8"},"最新文章",-1)),o(me,{articles:a.value},null,8,["articles"])]),e("div",Ze,[e("div",et,[o(Re)])])])]))}};export{nt as default};
