import{r as m,c as x,e as a,l,j as n,h as P,b as C,f as i,q as k,H as c}from"./index-BjRrW_j8.js";import{u as q}from"./user-CHPnUmjS.js";const R={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900"},N={__name:"Register",setup(U){const p=P(),g=q(),f=m(),d=m(!1),r=m({username:"",email:"",password:"",confirmPassword:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(t,e,s)=>{e!==r.value.password?s(new Error("两次输入的密码不一致")):s()},trigger:"blur"}]},w=async()=>{await f.value.validate(),d.value=!0;try{const t={username:r.value.username,email:r.value.email,password:r.value.password};await g.register(t),c.success("注册成功"),p.push("/")}catch(t){c.error(t.message||"注册失败")}finally{d.value=!1}},_=()=>{p.push("/")};return(t,e)=>{const s=n("el-input"),u=n("el-form-item"),V=n("el-button"),y=n("el-form"),b=n("el-card");return C(),x("div",R,[a(b,{class:"w-full max-w-md"},{header:l(()=>[...e[4]||(e[4]=[i("h2",{class:"text-2xl font-bold text-center"},"用户注册",-1)])]),default:l(()=>[a(y,{model:r.value,rules:v,ref_key:"formRef",ref:f},{default:l(()=>[a(u,{prop:"username"},{default:l(()=>[a(s,{modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.username=o),placeholder:"用户名"},null,8,["modelValue"])]),_:1}),a(u,{prop:"email"},{default:l(()=>[a(s,{modelValue:r.value.email,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.email=o),placeholder:"邮箱"},null,8,["modelValue"])]),_:1}),a(u,{prop:"password"},{default:l(()=>[a(s,{modelValue:r.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.password=o),type:"password",placeholder:"密码"},null,8,["modelValue"])]),_:1}),a(u,{prop:"confirmPassword"},{default:l(()=>[a(s,{modelValue:r.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.confirmPassword=o),type:"password",placeholder:"确认密码"},null,8,["modelValue"])]),_:1}),a(u,null,{default:l(()=>[a(V,{type:"primary",class:"w-full",onClick:w,loading:d.value},{default:l(()=>[...e[5]||(e[5]=[k(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),i("div",{class:"text-center"},[i("span",{class:"text-primary cursor-pointer",onClick:_},"已有账号？立即登录")])]),_:1})])}}};export{N as default};
