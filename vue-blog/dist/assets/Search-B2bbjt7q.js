import{r as k,l as Y,z as $,c as i,o as n,b as s,J as g,t as r,B as E,a,w as o,H as I,d as h,I as L,F as V,n as B,K as S,u as F,e as u,h as v,x as T,R as U,S as H,T as J,ah as O,g as M,D as G,L as P}from"./index-cinz6B6s.js";import{g as Q}from"./article-DZlkEKLi.js";import{s as W}from"./seo-BkU-ml2H.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"search-page"},ee={class:"page-header"},te={class:"search-info"},se={key:0},ae={key:1},oe={class:"content"},le={class:"search-box-container"},ne={class:"search-results"},ie={key:0,class:"results-list"},re=["onClick"],ue={class:"result-content"},ce={class:"result-title"},de={class:"result-meta"},_e={class:"meta-item"},pe={class:"meta-item"},me={class:"meta-item"},ve={class:"meta-item"},fe={class:"result-tags"},he={key:1,class:"empty-state"},ye={key:2,class:"initial-state"},ke={class:"initial-content"},ge={__name:"Search",setup(Ce){const w=$(),y=F(),f=k(!1),_=k(""),c=k(""),d=k([]),j=e=>e?P(e).format("YYYY-MM-DD"):"",D=e=>typeof e=="object"&&e!==null?e.name:e,q=(e,t)=>{t&&typeof t=="object"&&t.id?y.push(`/tag/${t.id}`):y.push(`/articles?tag=${encodeURIComponent(e)}`)},C=async()=>{if(!_.value.trim()){S.warning("请输入搜索关键词");return}c.value=_.value.trim(),f.value=!0;try{const e=await Q({keyword:c.value,status:"0"});d.value=e.data||[]}catch{S.error("搜索失败"),d.value=[]}finally{f.value=!1}},b=()=>{_.value="",c.value="",d.value=[]},z=e=>{if(typeof e=="object"&&e!==null){const t=e.slug||e.id;y.push({name:"ArticleDetail",params:{id:t}})}else y.push({name:"ArticleDetail",params:{id:e}})};return Y(()=>{w.query.q&&(_.value=w.query.q,C()),W({title:"搜索",description:"在博客中搜索内容",keywords:["搜索","查找","博客"]})}),(e,t)=>{const p=h("el-icon"),x=h("el-button"),A=h("el-input"),N=h("el-tag"),K=h("el-empty"),R=L("loading");return n(),i("div",Z,[s("div",ee,[t[1]||(t[1]=s("h1",{class:"page-title"},"搜索结果",-1)),s("div",te,[c.value?(n(),i("span",se,'关键词: "'+r(c.value)+'"',1)):g("",!0),d.value.length>0?(n(),i("span",ae,"找到 "+r(d.value.length)+" 个结果",1)):g("",!0)])]),s("div",oe,[s("div",le,[a(A,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=l=>_.value=l),placeholder:"搜索文章标题、内容或标签...",size:"large",clearable:"",onKeyup:I(C,["enter"]),onClear:b},{prefix:o(()=>[a(p,null,{default:o(()=>[a(v(T))]),_:1})]),append:o(()=>[a(x,{onClick:C,type:"primary"},{default:o(()=>[...t[2]||(t[2]=[u(" 搜索 ",-1)])]),_:1})]),_:1},8,["modelValue"])]),E((n(),i("div",ne,[d.value.length>0?(n(),i("div",ie,[(n(!0),i(V,null,B(d.value,l=>(n(),i("div",{key:l.id,class:"result-item",onClick:m=>z(l)},[s("div",ue,[s("h3",ce,r(l.title),1),s("p",de,[s("span",_e,[a(p,null,{default:o(()=>[a(v(U))]),_:1}),u(" "+r(l.viewCount||0)+" 阅读 ",1)]),s("span",pe,[a(p,null,{default:o(()=>[a(v(H))]),_:1}),u(" "+r(l.likeCount||0)+" 点赞 ",1)]),s("span",me,[a(p,null,{default:o(()=>[a(v(J))]),_:1}),u(" "+r(l.commentCount||0)+" 评论 ",1)]),s("span",ve,[a(p,null,{default:o(()=>[a(v(O))]),_:1}),u(" "+r(j(l.createTime)),1)])]),s("div",fe,[l.categoryName?(n(),M(N,{key:0,size:"small",type:"primary"},{default:o(()=>[u(r(l.categoryName),1)]),_:2},1024)):g("",!0),(n(!0),i(V,null,B(l.tags,m=>(n(),M(N,{key:m.id||m,size:"small",class:"tag-item",onClick:G(we=>q(D(m),m),["stop"])},{default:o(()=>[u(r(D(m)),1)]),_:2},1032,["onClick"]))),128))])])],8,re))),128))])):!f.value&&c.value?(n(),i("div",he,[a(K,{description:"没有找到相关文章"},{default:o(()=>[a(x,{type:"primary",onClick:b},{default:o(()=>[...t[3]||(t[3]=[u(" 重新搜索 ",-1)])]),_:1})]),_:1})])):!f.value&&!c.value?(n(),i("div",ye,[s("div",ke,[a(p,{class:"search-icon"},{default:o(()=>[a(v(T))]),_:1}),t[4]||(t[4]=s("h3",null,"开始搜索",-1)),t[5]||(t[5]=s("p",null,"输入关键词来搜索文章",-1))])])):g("",!0)])),[[R,f.value]])])])}}},Ve=X(ge,[["__scopeId","data-v-e3153924"]]);export{Ve as default};
