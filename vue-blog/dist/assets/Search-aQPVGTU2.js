import{r as y,o as A,Q as K,c as r,f as e,D as g,G as i,B as F,e as t,l as a,C as I,j as f,A as L,F as x,E as D,H as V,h as O,b as n,q as u,n as p,y as q,N as R,O as $,P as G,Y as H,k as B,I as P}from"./index-BjRrW_j8.js";import{g as Q}from"./article-BD8_1azX.js";import{s as U}from"./seo-BkU-ml2H.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"search-page"},X={class:"page-header"},Z={class:"search-info"},ee={key:0},te={key:1},se={class:"content"},ae={class:"search-box-container"},oe={class:"search-results"},le={key:0,class:"results-list"},ne=["onClick"],re={class:"result-content"},ie={class:"result-title"},ue={class:"result-meta"},ce={class:"meta-item"},de={class:"meta-item"},_e={class:"meta-item"},me={class:"meta-item"},pe={class:"result-tags"},ve={key:1,class:"empty-state"},fe={key:2,class:"initial-state"},he={class:"initial-content"},ye={__name:"Search",setup(ge){const C=K(),S=O(),v=y(!1),_=y(""),c=y(""),d=y([]),Y=s=>s?P(s).format("YYYY-MM-DD"):"",E=s=>typeof s=="object"&&s!==null?s.name:s,k=async()=>{if(!_.value.trim()){V.warning("请输入搜索关键词");return}c.value=_.value.trim(),v.value=!0;try{const s=await Q({keyword:c.value,status:"0"});d.value=s.data||[]}catch(s){console.error("搜索失败:",s),V.error("搜索失败"),d.value=[]}finally{v.value=!1}},w=()=>{_.value="",c.value="",d.value=[]},M=s=>{S.push(`/article/${s}`)};return A(()=>{C.query.q&&(_.value=C.query.q,k()),U({title:"搜索",description:"在博客中搜索内容",keywords:["搜索","查找","博客"]})}),(s,o)=>{const m=f("el-icon"),N=f("el-button"),T=f("el-input"),b=f("el-tag"),j=f("el-empty"),z=L("loading");return n(),r("div",W,[e("div",X,[o[1]||(o[1]=e("h1",{class:"page-title"},"搜索结果",-1)),e("div",Z,[c.value?(n(),r("span",ee,'关键词: "'+i(c.value)+'"',1)):g("",!0),d.value.length>0?(n(),r("span",te,"找到 "+i(d.value.length)+" 个结果",1)):g("",!0)])]),e("div",se,[e("div",ae,[t(T,{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=l=>_.value=l),placeholder:"搜索文章标题、内容或标签...",size:"large",clearable:"",onKeyup:I(k,["enter"]),onClear:w},{prefix:a(()=>[t(m,null,{default:a(()=>[t(p(q))]),_:1})]),append:a(()=>[t(N,{onClick:k,type:"primary"},{default:a(()=>[...o[2]||(o[2]=[u(" 搜索 ",-1)])]),_:1})]),_:1},8,["modelValue"])]),F((n(),r("div",oe,[d.value.length>0?(n(),r("div",le,[(n(!0),r(x,null,D(d.value,l=>(n(),r("div",{key:l.id,class:"result-item",onClick:h=>M(l.id)},[e("div",re,[e("h3",ie,i(l.title),1),e("p",ue,[e("span",ce,[t(m,null,{default:a(()=>[t(p(R))]),_:1}),u(" "+i(l.viewCount||0)+" 阅读 ",1)]),e("span",de,[t(m,null,{default:a(()=>[t(p($))]),_:1}),u(" "+i(l.likeCount||0)+" 点赞 ",1)]),e("span",_e,[t(m,null,{default:a(()=>[t(p(G))]),_:1}),u(" "+i(l.commentCount||0)+" 评论 ",1)]),e("span",me,[t(m,null,{default:a(()=>[t(p(H))]),_:1}),u(" "+i(Y(l.createTime)),1)])]),e("div",pe,[l.categoryName?(n(),B(b,{key:0,size:"small",type:"primary"},{default:a(()=>[u(i(l.categoryName),1)]),_:2},1024)):g("",!0),(n(!0),r(x,null,D(l.tags,h=>(n(),B(b,{key:h.id||h,size:"small",class:"tag-item"},{default:a(()=>[u(i(E(h)),1)]),_:2},1024))),128))])])],8,ne))),128))])):!v.value&&c.value?(n(),r("div",ve,[t(j,{description:"没有找到相关文章"},{default:a(()=>[t(N,{type:"primary",onClick:w},{default:a(()=>[...o[3]||(o[3]=[u(" 重新搜索 ",-1)])]),_:1})]),_:1})])):!v.value&&!c.value?(n(),r("div",fe,[e("div",he,[t(m,{class:"search-icon"},{default:a(()=>[t(p(q))]),_:1}),o[4]||(o[4]=e("h3",null,"开始搜索",-1)),o[5]||(o[5]=e("p",null,"输入关键词来搜索文章",-1))])])):g("",!0)])),[[z,v.value]])])])}}},be=J(ye,[["__scopeId","data-v-e6e906b6"]]);export{be as default};
