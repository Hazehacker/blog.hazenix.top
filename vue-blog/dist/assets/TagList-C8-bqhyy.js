import{r as f,l as x,c as l,o,b as p,B as h,I as A,J as w,F as C,n as k,u as T,d as b,g as B,w as D,e as E,t as g}from"./index-Cr_Or7lo.js";import{g as L}from"./tag-Cj5_Wo_o.js";import{a as M}from"./article-CsEU7-wh.js";const N={class:"max-w-6xl mx-auto"},V={class:"flex flex-wrap gap-4"},F={class:"ml-2 text-xs opacity-70"},I={key:0,class:"w-full text-center py-12 text-gray-500"},R={__name:"TagList",setup($){const y=T(),i=f([]),n=f(!1),m=async a=>{try{const t=await M.getArticleList();if(t&&t.code===200&&t.data){let r=[];Array.isArray(t.data)?r=t.data:t.data.list&&Array.isArray(t.data.list)?r=t.data.list:Array.isArray(t.data.records)?r=t.data.records:r=[];const c=r.filter(e=>!(e.id===1||e.id==="1"||e.status!==0&&e.status!=="0")),s=new Map;return c.forEach(e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach(u=>{const d=typeof u=="object"?u.id:u;d&&s.set(d,(s.get(d)||0)+1)})}),a.map(e=>({...e,articleCount:s.get(e.id)||0})).filter(e=>e.articleCount>0)}return a}catch{return a}},_=async()=>{n.value=!0;try{let t=(await L()).data||[];t=await m(t),i.value=t}catch{i.value=[]}finally{n.value=!1}},v=a=>{y.push(`/tag/${a.id}`)};return x(()=>{_()}),(a,t)=>{const r=b("el-tag"),c=A("loading");return o(),l("div",N,[t[0]||(t[0]=p("h1",{class:"text-3xl font-bold mb-8"},"文章标签",-1)),h((o(),l("div",V,[(o(!0),l(C,null,k(i.value,s=>(o(),B(r,{key:s.id,size:"large",class:"cursor-pointer hover:opacity-80 transition-opacity",onClick:e=>v(s)},{default:D(()=>[E(g(s.name)+" ",1),p("span",F,"("+g(s.articleCount||0)+")",1)]),_:2},1032,["onClick"]))),128)),i.value.length===0&&!n.value?(o(),l("div",I," 暂无标签 ")):w("",!0)])),[[c,n.value]])])}}};export{R as default};
