import{W as V,r as v,o as j,c as l,f as s,B as P,D as C,A as q,F,E as x,e as o,l as r,j as p,H as w,h as O,b as n,G as c,q as i,n as m,N as G,O as H,P as J,Y as L,k as N,J as R,a7 as W,I as K,a8 as Q}from"./index-BjRrW_j8.js";import{d as X}from"./article-BD8_1azX.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={getFavoriteArticles(g={}){return V({url:"/user/user/favorite",method:"get",params:{sortBy:"createTime",sortOrder:"desc",...g}})}};function te(g={}){return ee.getFavoriteArticles(g)}const se={class:"user-favorites"},ae={class:"favorites-container"},oe={class:"favorites-list"},ne=["onClick"],re={class:"article-card"},le={key:0,class:"article-cover"},ie=["src","alt"],ce={class:"article-content"},ue={class:"article-title"},de={class:"article-meta"},_e={class:"meta-item"},ve={class:"meta-item"},pe={class:"meta-item"},me={class:"meta-item"},ge={class:"article-tags"},fe={class:"article-actions"},he={key:0,class:"empty-state"},ye={key:1,class:"pagination-container"},ke={__name:"UserFavorites",setup(g){const D=O(),f=v(!1),h=v([]),u=v(1),d=v(10),z=v(0),T=e=>e?K(e).format("YYYY-MM-DD"):"",M=e=>typeof e=="object"&&e!==null?e.name:e,y=async()=>{f.value=!0;try{const e=await te({page:u.value,pageSize:d.value});h.value=e.data.records||e.data||[],z.value=e.data.total||h.value.length}catch(e){console.error("加载收藏文章失败:",e),w.error("加载收藏文章失败")}finally{f.value=!1}},S=e=>{D.push(`/article/${e}`)},b=async e=>{try{await Q.confirm("确定要取消收藏这篇文章吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await X(e),w.success("已取消收藏"),y()}catch(a){a!=="cancel"&&(console.error("取消收藏失败:",a),w.error("操作失败"))}},Y=e=>{d.value=e,u.value=1,y()},$=e=>{u.value=e,y()};return j(()=>{y()}),(e,a)=>{const k=p("el-icon"),A=p("el-tag"),B=p("el-button"),E=p("el-empty"),I=p("el-pagination"),U=q("loading");return n(),l("div",se,[a[5]||(a[5]=s("div",{class:"page-header"},[s("div",{class:"header-content"},[s("h1",{class:"page-title"},"我的收藏"),s("p",{class:"page-description"},"您收藏的文章列表")])],-1)),s("div",ae,[P((n(),l("div",oe,[(n(!0),l(F,null,x(h.value,t=>(n(),l("div",{key:t.id,class:"favorite-item",onClick:_=>S(t.id)},[s("div",re,[t.coverImage?(n(),l("div",le,[s("img",{src:t.coverImage,alt:t.title},null,8,ie)])):C("",!0),s("div",ce,[s("h3",ue,c(t.title),1),s("div",de,[s("span",_e,[o(k,null,{default:r(()=>[o(m(G))]),_:1}),i(" "+c(t.viewCount||0)+" 阅读 ",1)]),s("span",ve,[o(k,null,{default:r(()=>[o(m(H))]),_:1}),i(" "+c(t.likeCount||0)+" 点赞 ",1)]),s("span",pe,[o(k,null,{default:r(()=>[o(m(J))]),_:1}),i(" "+c(t.commentCount||0)+" 评论 ",1)]),s("span",me,[o(k,null,{default:r(()=>[o(m(L))]),_:1}),i(" "+c(T(t.createTime)),1)])]),s("div",ge,[t.categoryName?(n(),N(A,{key:0,size:"small",type:"primary"},{default:r(()=>[i(c(t.categoryName),1)]),_:2},1024)):C("",!0),(n(!0),l(F,null,x(t.tags,_=>(n(),N(A,{key:_.id||_,size:"small",class:"tag-item"},{default:r(()=>[i(c(M(_)),1)]),_:2},1024))),128))])]),s("div",fe,[o(B,{type:"danger",size:"small",icon:m(W),onClick:R(_=>b(t.id),["stop"])},{default:r(()=>[...a[3]||(a[3]=[i(" 取消收藏 ",-1)])]),_:1},8,["icon","onClick"])])])],8,ne))),128))])),[[U,f.value]]),!f.value&&h.value.length===0?(n(),l("div",he,[o(E,{description:"还没有收藏任何文章"},{default:r(()=>[o(B,{type:"primary",onClick:a[0]||(a[0]=t=>e.$router.push("/articles"))},{default:r(()=>[...a[4]||(a[4]=[i(" 去浏览文章 ",-1)])]),_:1})]),_:1})])):C("",!0),z.value>d.value?(n(),l("div",ye,[o(I,{"current-page":u.value,"onUpdate:currentPage":a[1]||(a[1]=t=>u.value=t),"page-size":d.value,"onUpdate:pageSize":a[2]||(a[2]=t=>d.value=t),"page-sizes":[10,20,50],total:z.value,layout:"total, sizes, prev, pager, next",onSizeChange:Y,onCurrentChange:$},null,8,["current-page","page-size","total"])])):C("",!0)])])}}},Ae=Z(ke,[["__scopeId","data-v-2b655782"]]);export{Ae as default};
