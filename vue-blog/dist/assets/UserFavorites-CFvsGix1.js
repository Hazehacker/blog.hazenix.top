import{r as p,l as E,c as i,o as n,b as a,B as R,J as k,I as L,F as T,n as b,a as o,w as l,d as v,K as w,u as P,t as u,e as r,h as m,R as J,S as K,T as q,ah as G,g as D,D as F,ai as H,L as O,aj as Q}from"./index-cinz6B6s.js";import{g as W}from"./user-BrbyBz3J.js";import{e as X}from"./article-DZlkEKLi.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"user-favorites"},te={class:"favorites-container"},se={class:"favorites-list"},ae=["onClick"],oe={class:"article-card"},ne={key:0,class:"article-cover"},le=["src","alt"],ie={class:"article-content"},re={class:"article-title"},ce={class:"article-meta"},ue={class:"meta-item"},de={class:"meta-item"},_e={class:"meta-item"},pe={class:"meta-item"},ve={class:"article-tags"},me={class:"article-actions"},fe={key:0,class:"empty-state"},ge={key:1,class:"pagination-container"},he={__name:"UserFavorites",setup(ye){const f=P(),g=p(!1),h=p([]),d=p(1),_=p(10),z=p(0),N=e=>e?O(e).format("YYYY-MM-DD"):"",B=e=>typeof e=="object"&&e!==null?e.name:e,S=(e,t)=>{t&&typeof t=="object"&&t.id?f.push(`/tag/${t.id}`):f.push(`/articles?tag=${encodeURIComponent(e)}`)},y=async()=>{g.value=!0;try{const e=await W({page:d.value,pageSize:_.value});h.value=e.data.records||e.data||[],z.value=e.data.total||h.value.length}catch{w.error("加载收藏文章失败")}finally{g.value=!1}},M=e=>{if(typeof e=="object"&&e!==null){const t=e.slug||e.id;f.push(`/article/${t}`)}else f.push(`/article/${e}`)},j=async e=>{try{await Q.confirm("确定要取消收藏这篇文章吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await X(e),w.success("已取消收藏"),y()}catch(t){t!=="cancel"&&w.error("操作失败")}},A=e=>{_.value=e,d.value=1,y()},I=e=>{d.value=e,y()};return E(()=>{y()}),(e,t)=>{const C=v("el-icon"),$=v("el-tag"),x=v("el-button"),U=v("el-empty"),V=v("el-pagination"),Y=L("loading");return n(),i("div",ee,[t[5]||(t[5]=a("div",{class:"page-header"},[a("div",{class:"header-content"},[a("h1",{class:"page-title"},"我的收藏"),a("p",{class:"page-description"},"您收藏的文章列表")])],-1)),a("div",te,[R((n(),i("div",se,[(n(!0),i(T,null,b(h.value,s=>(n(),i("div",{key:s.id,class:"favorite-item",onClick:c=>M(s)},[a("div",oe,[s.coverImage?(n(),i("div",ne,[a("img",{src:s.coverImage,alt:s.title},null,8,le)])):k("",!0),a("div",ie,[a("h3",re,u(s.title),1),a("div",ce,[a("span",ue,[o(C,null,{default:l(()=>[o(m(J))]),_:1}),r(" "+u(s.viewCount||0)+" 阅读 ",1)]),a("span",de,[o(C,null,{default:l(()=>[o(m(K))]),_:1}),r(" "+u(s.likeCount||0)+" 点赞 ",1)]),a("span",_e,[o(C,null,{default:l(()=>[o(m(q))]),_:1}),r(" "+u(s.commentCount||0)+" 评论 ",1)]),a("span",pe,[o(C,null,{default:l(()=>[o(m(G))]),_:1}),r(" "+u(N(s.createTime)),1)])]),a("div",ve,[s.categoryName?(n(),D($,{key:0,size:"small",type:"primary"},{default:l(()=>[r(u(s.categoryName),1)]),_:2},1024)):k("",!0),(n(!0),i(T,null,b(s.tags,c=>(n(),D($,{key:c.id||c,size:"small",class:"tag-item",onClick:F(Ce=>S(B(c),c),["stop"])},{default:l(()=>[r(u(B(c)),1)]),_:2},1032,["onClick"]))),128))])]),a("div",me,[o(x,{type:"danger",size:"small",icon:m(H),onClick:F(c=>j(s.id),["stop"])},{default:l(()=>[...t[3]||(t[3]=[r(" 取消收藏 ",-1)])]),_:1},8,["icon","onClick"])])])],8,ae))),128))])),[[Y,g.value]]),!g.value&&h.value.length===0?(n(),i("div",fe,[o(U,{description:"还没有收藏任何文章"},{default:l(()=>[o(x,{type:"primary",onClick:t[0]||(t[0]=s=>e.$router.push("/articles"))},{default:l(()=>[...t[4]||(t[4]=[r(" 去浏览文章 ",-1)])]),_:1})]),_:1})])):k("",!0),z.value>_.value?(n(),i("div",ge,[o(V,{"current-page":d.value,"onUpdate:currentPage":t[1]||(t[1]=s=>d.value=s),"page-size":_.value,"onUpdate:pageSize":t[2]||(t[2]=s=>_.value=s),"page-sizes":[10,20,50],total:z.value,layout:"total, sizes, prev, pager, next",onSizeChange:A,onCurrentChange:I},null,8,["current-page","page-size","total"])])):k("",!0)])])}}},$e=Z(he,[["__scopeId","data-v-2feeb8e3"]]);export{$e as default};
