import{r as v,j as Y,c as r,o as n,b as s,y as j,B as C,A as I,F as B,C as D,a as o,w as l,f as p,E as z,u as P,D as c,l as i,h as m,O as G,P as K,Q as L,a1 as O,g as F,K as Q,ak as R,G as q,al as H}from"./index-BBqYyNLz.js";import{g as J}from"./user-S9uowIP7.js";import{c as W}from"./article-o4o8S-fg.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"user-favorites"},ee={class:"favorites-container"},te={class:"favorites-list"},se=["onClick"],ae={class:"article-card"},oe={key:0,class:"article-cover"},ne=["src","alt"],le={class:"article-content"},re={class:"article-title"},ie={class:"article-meta"},ce={class:"meta-item"},ue={class:"meta-item"},de={class:"meta-item"},_e={class:"meta-item"},ve={class:"article-tags"},pe={class:"article-actions"},me={key:0,class:"empty-state"},ge={key:1,class:"pagination-container"},fe={__name:"UserFavorites",setup(he){const N=P(),g=v(!1),f=v([]),u=v(1),d=v(10),k=v(0),A=e=>e?q(e).format("YYYY-MM-DD"):"",M=e=>typeof e=="object"&&e!==null?e.name:e,h=async()=>{g.value=!0;try{const e=await J({page:u.value,pageSize:d.value});f.value=e.data.records||e.data||[],k.value=e.data.total||f.value.length}catch(e){console.error("加载收藏文章失败:",e),z.error("加载收藏文章失败")}finally{g.value=!1}},S=e=>{N.push(`/article/${e}`)},T=async e=>{try{await H.confirm("确定要取消收藏这篇文章吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await W(e),z.success("已取消收藏"),h()}catch(a){a!=="cancel"&&(console.error("取消收藏失败:",a),z.error("操作失败"))}},b=e=>{d.value=e,u.value=1,h()},$=e=>{u.value=e,h()};return Y(()=>{h()}),(e,a)=>{const y=p("el-icon"),w=p("el-tag"),x=p("el-button"),E=p("el-empty"),U=p("el-pagination"),V=I("loading");return n(),r("div",Z,[a[5]||(a[5]=s("div",{class:"page-header"},[s("div",{class:"header-content"},[s("h1",{class:"page-title"},"我的收藏"),s("p",{class:"page-description"},"您收藏的文章列表")])],-1)),s("div",ee,[j((n(),r("div",te,[(n(!0),r(B,null,D(f.value,t=>(n(),r("div",{key:t.id,class:"favorite-item",onClick:_=>S(t.id)},[s("div",ae,[t.coverImage?(n(),r("div",oe,[s("img",{src:t.coverImage,alt:t.title},null,8,ne)])):C("",!0),s("div",le,[s("h3",re,c(t.title),1),s("div",ie,[s("span",ce,[o(y,null,{default:l(()=>[o(m(G))]),_:1}),i(" "+c(t.viewCount||0)+" 阅读 ",1)]),s("span",ue,[o(y,null,{default:l(()=>[o(m(K))]),_:1}),i(" "+c(t.likeCount||0)+" 点赞 ",1)]),s("span",de,[o(y,null,{default:l(()=>[o(m(L))]),_:1}),i(" "+c(t.commentCount||0)+" 评论 ",1)]),s("span",_e,[o(y,null,{default:l(()=>[o(m(O))]),_:1}),i(" "+c(A(t.createTime)),1)])]),s("div",ve,[t.categoryName?(n(),F(w,{key:0,size:"small",type:"primary"},{default:l(()=>[i(c(t.categoryName),1)]),_:2},1024)):C("",!0),(n(!0),r(B,null,D(t.tags,_=>(n(),F(w,{key:_.id||_,size:"small",class:"tag-item"},{default:l(()=>[i(c(M(_)),1)]),_:2},1024))),128))])]),s("div",pe,[o(x,{type:"danger",size:"small",icon:m(R),onClick:Q(_=>T(t.id),["stop"])},{default:l(()=>[...a[3]||(a[3]=[i(" 取消收藏 ",-1)])]),_:1},8,["icon","onClick"])])])],8,se))),128))])),[[V,g.value]]),!g.value&&f.value.length===0?(n(),r("div",me,[o(E,{description:"还没有收藏任何文章"},{default:l(()=>[o(x,{type:"primary",onClick:a[0]||(a[0]=t=>e.$router.push("/articles"))},{default:l(()=>[...a[4]||(a[4]=[i(" 去浏览文章 ",-1)])]),_:1})]),_:1})])):C("",!0),k.value>d.value?(n(),r("div",ge,[o(U,{"current-page":u.value,"onUpdate:currentPage":a[1]||(a[1]=t=>u.value=t),"page-size":d.value,"onUpdate:pageSize":a[2]||(a[2]=t=>d.value=t),"page-sizes":[10,20,50],total:k.value,layout:"total, sizes, prev, pager, next",onSizeChange:b,onCurrentChange:$},null,8,["current-page","page-size","total"])])):C("",!0)])])}}},we=X(fe,[["__scopeId","data-v-2b655782"]]);export{we as default};
