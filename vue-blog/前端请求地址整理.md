# 前端请求地址整理文档

## 基础配置

- **基础URL**: `import.meta.env.VITE_API_BASE_URL` 或默认值 `http://localhost:9090`
- **完整地址格式**: `{基础URL}{路径}`
- **默认完整地址**: `http://localhost:9090{路径}`

---

## 一、认证相关接口 (`src/api/auth.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 用户登录 | POST | `http://localhost:9090/user/user/login` | 用户登录获取访问令牌 |
| 用户注册 | POST | `http://localhost:9090/user/user/register` | 用户注册新账号 |
| 获取用户信息 | GET | `http://localhost:9090/user/user/userinfo` | 获取当前登录用户信息 |
| 获取Google授权URL | GET | `http://localhost:9090/user/user/google/url` | 获取Google第三方授权URL |
| Google授权回调 | GET | `http://localhost:9090/user/user/google/callback?code={code}` | Google授权回调 |
| 获取GitHub授权URL | GET | `http://localhost:9090/user/user/github/url` | 获取GitHub第三方授权URL |
| GitHub授权回调 | GET | `http://localhost:9090/user/user/github/callback?code={code}` | GitHub授权回调 |

---

## 二、文章相关接口 (`src/api/article.js`)

### 2.1 用户端文章接口

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取文章列表 | GET | `http://localhost:9090/user/articles` | 获取文章列表，支持分页和筛选 |
| 获取文章详情 | GET | `http://localhost:9090/user/articles/{id}` | 根据ID获取文章详情 |
| 根据slug获取文章 | GET | `http://localhost:9090/user/articles/slug/{slug}` | 根据slug获取文章 |
| 搜索文章 | GET | `http://localhost:9090/user/articles?keyword={keyword}` | 搜索文章 |
| 点赞文章 | POST | `http://localhost:9090/user/articles/{id}/like` | 点赞文章 |
| 收藏文章 | POST | `http://localhost:9090/user/articles/{id}/favorite` | 收藏文章 |
| 获取相关文章 | GET | `http://localhost:9090/user/articles/{id}/related` | 获取相关文章 |
| 获取热门文章 | GET | `http://localhost:9090/user/articles/popular` | 获取热门文章 |
| 增加浏览量 | PUT | `http://localhost:9090/user/articles/{id}/view` | 增加文章浏览量 |

### 2.2 管理端文章接口

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 创建文章 | POST | `http://localhost:9090/api/articles` | 创建新文章 |
| 更新文章 | PUT | `http://localhost:9090/api/articles/{id}` | 更新文章 |
| 删除文章 | DELETE | `http://localhost:9090/api/articles/{id}` | 删除文章 |
| 批量删除文章 | DELETE | `http://localhost:9090/api/articles/batch` | 批量删除文章 |
| 发布/取消发布 | PATCH | `http://localhost:9090/api/articles/{id}/status` | 修改文章状态 |
| 获取最新文章 | GET | `http://localhost:9090/api/articles/latest` | 获取最新文章 |
| 获取推荐文章 | GET | `http://localhost:9090/api/articles/recommended` | 获取推荐文章 |
| 获取文章统计 | GET | `http://localhost:9090/api/articles/{id}/stats` | 获取文章统计信息 |
| 获取所有文章slug | GET | `http://localhost:9090/api/articles/slugs` | 获取所有已发布文章的slug |

---

## 三、评论相关接口 (`src/api/comment.js`)

### 3.1 用户端评论接口

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取评论列表 | GET | `http://localhost:9090/user/comments/list` | 获取评论列表（公开资源） |
| 创建评论 | POST | `http://localhost:9090/user/comments` | 创建评论 |

### 3.2 管理端评论接口

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取评论详情 | GET | `http://localhost:9090/api/comments/{id}` | 获取评论详情 |
| 更新评论 | PUT | `http://localhost:9090/api/comments/{id}` | 更新评论 |
| 删除评论 | DELETE | `http://localhost:9090/api/comments/{id}` | 删除评论 |
| 批量删除评论 | DELETE | `http://localhost:9090/api/comments/batch` | 批量删除评论 |
| 点赞评论 | POST | `http://localhost:9090/api/comments/{id}/like` | 点赞评论 |
| 审核评论 | PATCH | `http://localhost:9090/api/comments/{id}/approve` | 审核通过评论 |
| 拒绝评论 | PATCH | `http://localhost:9090/api/comments/{id}/reject` | 拒绝评论 |
| 批量审核评论 | PATCH | `http://localhost:9090/api/comments/batch/approve` | 批量审核通过 |
| 批量拒绝评论 | PATCH | `http://localhost:9090/api/comments/batch/reject` | 批量拒绝评论 |
| 获取评论统计 | GET | `http://localhost:9090/api/comments/stats?articleId={articleId}` | 获取评论统计 |
| 获取最新评论 | GET | `http://localhost:9090/api/comments/latest` | 获取最新评论 |
| 获取热门评论 | GET | `http://localhost:9090/api/comments/popular` | 获取热门评论 |

### 3.3 兼容接口（旧版）

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取文章评论 | GET | `http://localhost:9090/api/articles/{articleId}/comments` | 获取文章评论列表（兼容接口） |
| 添加文章评论 | POST | `http://localhost:9090/api/articles/{articleId}/comments` | 添加文章评论（兼容接口） |

---

## 四、分类相关接口

### 4.1 用户端分类接口 (`src/api/category.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取分类列表 | GET | `http://localhost:9090/user/categories` | 获取分类列表（公开资源） |
| 获取分类文章 | GET | `http://localhost:9090/user/categories/{id}/articles` | 获取分类下的文章（公开资源） |

### 4.2 管理端分类接口 (`src/api/admin.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取分类列表 | GET | `http://localhost:9090/admin/categories` | 获取分类列表 |
| 获取分类详情 | GET | `http://localhost:9090/admin/categories/{id}` | 获取分类详情 |
| 创建分类 | POST | `http://localhost:9090/admin/categories` | 创建分类 |
| 更新分类 | PUT | `http://localhost:9090/admin/categories/{id}` | 更新分类 |
| 删除分类 | DELETE | `http://localhost:9090/admin/categories/{id}` | 删除分类 |
| 批量删除分类 | DELETE | `http://localhost:9090/admin/categories/batch` | 批量删除分类 |

---

## 五、标签相关接口

### 5.1 用户端标签接口 (`src/api/tag.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取标签列表 | GET | `http://localhost:9090/user/tags` | 获取标签列表（公开资源） |
| 获取标签文章 | GET | `http://localhost:9090/user/tags/{id}/articles` | 获取标签下的文章（公开资源） |

### 5.2 管理端标签接口 (`src/api/admin.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取标签列表 | GET | `http://localhost:9090/admin/tags` | 获取标签列表 |
| 获取标签详情 | GET | `http://localhost:9090/admin/tags/{id}` | 获取标签详情 |
| 创建标签 | POST | `http://localhost:9090/admin/tags` | 创建标签 |
| 更新标签 | PUT | `http://localhost:9090/admin/tags/{id}` | 更新标签 |
| 删除标签 | DELETE | `http://localhost:9090/admin/tags/{id}` | 删除标签 |
| 批量删除标签 | DELETE | `http://localhost:9090/admin/tags/batch` | 批量删除标签 |

---

## 六、用户相关接口 (`src/api/user.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取收藏文章 | GET | `http://localhost:9090/user/user/favorite` | 获取用户收藏的文章 |
| 获取用户统计 | GET | `http://localhost:9090/user/user/stats` | 获取当前登录用户的统计信息 |
| 上传图片 | POST | `http://localhost:9090/user/common/upload` | 上传图片（用户端） |
| 更新用户资料 | PUT | `http://localhost:9090/user/user/profile` | 更新用户资料 |
| 修改密码 | PUT | `http://localhost:9090/user/user/password` | 修改密码 |

---

## 七、友链相关接口

### 7.1 用户端友链接口 (`src/api/frontend.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取友链列表 | GET | `http://localhost:9090/user/links` | 获取友链列表 |
| 申请友链 | POST | `http://localhost:9090/user/links/apply` | 申请友链 |

### 7.2 管理端友链接口 (`src/api/admin.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取友链列表 | GET | `http://localhost:9090/admin/links` | 获取友链列表 |
| 获取友链详情 | GET | `http://localhost:9090/admin/links/{id}` | 获取友链详情 |
| 创建友链 | POST | `http://localhost:9090/admin/links` | 创建友链 |
| 更新友链 | PUT | `http://localhost:9090/admin/links/{id}` | 更新友链 |
| 删除友链 | DELETE | `http://localhost:9090/admin/links/{id}` | 删除友链 |
| 批量删除友链 | DELETE | `http://localhost:9090/admin/links/batch` | 批量删除友链 |
| 更新友链状态 | PUT | `http://localhost:9090/admin/links/{id}/status` | 更新友链状态 |

---

## 八、树洞相关接口 (`src/api/treeHole.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取树洞列表 | GET | `http://localhost:9090/user/tree/list` | 获取树洞弹幕列表（公开资源） |
| 发送弹幕 | POST | `http://localhost:9090/user/tree` | 发送弹幕（需要认证） |

---

## 九、管理端仪表盘接口 (`src/api/admin.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取统计数据 | GET | `http://localhost:9090/admin/stats` | 获取仪表盘统计数据 |
| 获取最新文章 | GET | `http://localhost:9090/admin/articles/recent` | 获取最新文章 |
| 获取最新评论 | GET | `http://localhost:9090/admin/comments/recent` | 获取最新评论 |

---

## 十、管理端更新记录接口 (`src/api/admin.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取更新记录列表 | GET | `http://localhost:9090/admin/updates` | 获取更新记录列表 |
| 获取更新记录详情 | GET | `http://localhost:9090/admin/updates/{id}` | 获取更新记录详情 |
| 创建更新记录 | POST | `http://localhost:9090/admin/updates` | 创建更新记录 |
| 更新记录 | PUT | `http://localhost:9090/admin/updates/{id}` | 更新记录 |
| 删除更新记录 | DELETE | `http://localhost:9090/admin/updates/{id}` | 删除更新记录 |
| 批量删除更新记录 | DELETE | `http://localhost:9090/admin/updates/batch` | 批量删除更新记录 |

---

## 十一、文件上传接口

### 11.1 管理端上传接口 (`src/api/admin.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 上传图片 | POST | `http://localhost:9090/common/upload` | 上传图片（管理端） |
| 上传文件 | POST | `http://localhost:9090/common/upload` | 上传文件（管理端） |

### 11.2 用户端上传接口 (`src/api/user.js`)

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 上传图片 | POST | `http://localhost:9090/user/common/upload` | 上传图片（用户端） |

### 11.3 编辑器中的上传接口

#### ToastUIEditor (`src/components/admin/ToastUIEditor.vue`)
| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 编辑器图片上传 | POST | `http://localhost:9090/common/upload` | ToastUI编辑器图片上传 |

#### ArticleEditor (`src/components/admin/ArticleEditor.vue`)
| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 编辑器图片上传 | POST | `http://localhost:9090/common/upload` | wangEditor编辑器图片上传 |

---

## 十二、前台API接口 (`src/api/frontend.js`)

> **注意**: 这些接口使用了 `FRONTEND_BASE_URL = '/api'`，但实际代码中大部分接口已经改为使用 `/user/` 前缀。

| 功能 | 方法 | 完整路径 | 说明 |
|------|------|---------|------|
| 获取文章列表 | GET | `http://localhost:9090/api/articles` | 获取文章列表（可能已废弃） |
| 获取文章详情 | GET | `http://localhost:9090/api/articles/{id}` | 获取文章详情（可能已废弃） |
| 获取分类列表 | GET | `http://localhost:9090/api/categories` | 获取分类列表（可能已废弃） |
| 获取分类详情 | GET | `http://localhost:9090/api/categories/{id}` | 获取分类详情（可能已废弃） |
| 获取标签列表 | GET | `http://localhost:9090/api/tags` | 获取标签列表（可能已废弃） |
| 获取标签详情 | GET | `http://localhost:9090/api/tags/{id}` | 获取标签详情（可能已废弃） |
| 获取评论列表 | GET | `http://localhost:9090/api/comments` | 获取评论列表（可能已废弃） |
| 创建评论 | POST | `http://localhost:9090/api/comments` | 创建评论（可能已废弃） |
| 搜索 | GET | `http://localhost:9090/api/search` | 搜索（可能已废弃） |

---

## 接口路径分类总结

### 路径前缀说明

1. **`/user/`** - 用户端接口前缀
   - 用户操作相关：`/user/user/*`
   - 用户端文章：`/user/articles/*`
   - 用户端评论：`/user/comments/*`
   - 用户端分类：`/user/categories/*`
   - 用户端标签：`/user/tags/*`
   - 用户端友链：`/user/links/*`
   - 用户端树洞：`/user/tree/*`
   - 用户端上传：`/user/common/upload`

2. **`/admin/`** - 管理端接口前缀
   - 管理端文章：`/admin/articles/*`
   - 管理端分类：`/admin/categories/*`
   - 管理端标签：`/admin/tags/*`
   - 管理端评论：`/admin/comments/*`
   - 管理端友链：`/admin/links/*`
   - 管理端更新记录：`/admin/updates/*`
   - 管理端统计：`/admin/stats`

3. **`/api/`** - API接口前缀（部分旧接口使用）
   - API文章：`/api/articles/*`
   - API评论：`/api/comments/*`

4. **`/common/`** - 通用接口前缀
   - 文件上传：`/common/upload`

---

## 请求头说明

### 认证请求头
- **字段名**: `authentication`
- **格式**: `{token}`
- **说明**: JWT令牌，通过 `src/utils/request.js` 拦截器自动添加

### Content-Type
- **默认**: `application/json;charset=utf-8`
- **文件上传**: `multipart/form-data` (自动设置，包含boundary)

---

## 环境变量配置

### 开发环境
创建 `.env.local` 文件：
```env
VITE_API_BASE_URL=http://localhost:9090
```

### 生产环境
设置环境变量 `VITE_API_BASE_URL` 为实际的后端服务地址。

---

## 统计信息

- **总接口数量**: 约 100+ 个接口
- **用户端接口**: 约 30+ 个
- **管理端接口**: 约 50+ 个
- **文件上传接口**: 3 个（不同场景）
- **认证接口**: 6 个

---

## 注意事项

1. **公开资源标记**: 部分接口标记为 `isPublicResource: true`，表示不需要认证即可访问
2. **接口版本**: 部分接口存在新旧版本兼容，请注意区分
3. **路径参数**: `{id}`、`{slug}`、`{articleId}` 等需要替换为实际值
4. **查询参数**: GET请求的查询参数通过 `params` 对象传递
5. **请求体**: POST/PUT/PATCH请求的数据通过 `data` 对象传递

---

**文档生成时间**: 2025-01-XX  
**维护者**: 前端开发团队
